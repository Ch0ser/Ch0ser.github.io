<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content=" 学习参考的教程为Bash 脚本教程 - 网道，非常感谢开源工作者的贡献！\n如使用到该教程，可随意使用但请标明出处\nBash的模式拓展\r1.简介\r详见 Bash 的模式扩展 - Bash 脚本教程 - 网道\n">
<title>Bashextension</title>

<link rel='canonical' href='http://localhost:1313/p/bashextension/'>

<link rel="stylesheet" href="/scss/style.min.48ce54e3e307e3741d61de84a9b7fd091d2b70c905a608c90a1db85a009feb1b.css"><meta property='og:title' content="Bashextension">
<meta property='og:description' content=" 学习参考的教程为Bash 脚本教程 - 网道，非常感谢开源工作者的贡献！\n如使用到该教程，可随意使用但请标明出处\nBash的模式拓展\r1.简介\r详见 Bash 的模式扩展 - Bash 脚本教程 - 网道\n">
<meta property='og:url' content='http://localhost:1313/p/bashextension/'>
<meta property='og:site_name' content='Choser&#39;s Blog'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='Bash' /><meta property='article:published_time' content='2025-10-15T16:38:58&#43;08:00'/><meta property='article:modified_time' content='2025-10-15T16:38:58&#43;08:00'/><meta property='og:image' content='http://localhost:1313/images/OasisInDesert.png' />
<meta name="twitter:title" content="Bashextension">
<meta name="twitter:description" content=" 学习参考的教程为Bash 脚本教程 - 网道，非常感谢开源工作者的贡献！\n如使用到该教程，可随意使用但请标明出处\nBash的模式拓展\r1.简介\r详见 Bash 的模式扩展 - Bash 脚本教程 - 网道\n"><meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content='http://localhost:1313/images/OasisInDesert.png' />
    <link rel="shortcut icon" href="/favicon.ico" />

    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="切换菜单">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/avatar_hu1777375556697644536.png" width="300"
                            height="158" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">Choser&#39;s Blog</a></h1>
            <h2 class="site-description">进一寸有进一寸的欢喜</h2>
        </div>
    </header><ol class="menu-social">
            
                <li>
                    <a 
                        href='https://github.com/Ch0ser'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='mailto:ch0ser@qq.com'
                        target="_blank"
                        title="✉️ Email"
                        rel="me"
                    >
                        
                        
                            <?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1760270206847" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5175" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><path d="M858.656 192 165.344 192C109.472 192 64 237.44 64 293.312l0 469.376C64 818.56 109.472 864 165.344 864l693.312 0C914.528 864 960 818.56 960 762.688L960 293.312C960 237.44 914.528 192 858.656 192zM858.656 800 165.344 800C144.736 800 128 783.264 128 762.688L128 293.312C128 272.736 144.736 256 165.344 256l684.544 0-307.488 279.808c-14.592 14.56-38.272 14.528-54.752-1.792l-244.256-206.752C229.856 315.84 209.664 317.504 198.272 331.008c-11.424 13.472-9.76 33.664 3.744 45.088l242.304 204.96c19.904 19.904 46.048 29.792 72.032 29.792 25.632 0 51.136-9.632 70.176-28.736L896 300.544l0 462.144C896 783.264 879.264 800 858.656 800z" fill="#5D646F" p-id="5176"></path></svg>
                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>首页</span>
            </a>
        </li>
        
        
        <li >
            <a href='/about/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>关于我</span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">
                    
                        <li id="i18n-switch">  
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M4 5h7" />
  <path d="M9 3v2c0 4.418 -2.239 8 -5 8" />
  <path d="M5 9c-.003 2.144 2.952 3.908 6.7 4" />
  <path d="M12 20l4 -9l4 9" />
  <path d="M19.1 18h-6.2" />
</svg>



                            <select name="language" title="language" onchange="window.location.href = this.selectedOptions[0].value">
                                
                                    <option value="http://localhost:1313/en/" >English</option>
                                
                                    <option value="http://localhost:1313/" selected>中文</option>
                                
                                    <option value="http://localhost:1313/ar/" >عربي</option>
                                
                            </select>
                        </li>
                    
                

                
                    <li id="dark-mode-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <span>暗色模式</span>
                    </li>
                
            </ol>
        </li>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">目录</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#1简介">1.简介</a></li>
    <li><a href="#2波浪线扩展">2.波浪线扩展</a></li>
    <li><a href="#3-字符扩展">3.<code>?</code> 字符扩展</a></li>
    <li><a href="#4-字符扩展">4.<code>*</code> 字符扩展</a></li>
    <li><a href="#5方括号扩展">5.方括号扩展</a></li>
    <li><a href="#6start-end-扩展">6.[start-end] 扩展</a></li>
    <li><a href="#7大括号扩展">7.大括号扩展</a></li>
    <li><a href="#8startend-扩展">8.{start..end} 扩展</a></li>
    <li><a href="#9变量扩展"><strong>9.变量扩展</strong></a></li>
    <li><a href="#10子命令扩展">10.子命令扩展</a></li>
    <li><a href="#11算术扩展">11.算术扩展</a></li>
    <li><a href="#12字符类">12.字符类</a></li>
    <li><a href="#13使用注意点">13.使用注意点</a></li>
    <li><a href="#14量词语法">14.量词语法</a></li>
    <li><a href="#15shopt-命令">15.shopt 命令</a></li>
    <li><a href="#参考链接">参考链接</a></li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="has-image main-article">
    <header class="article-header">
        <div class="article-image">
            <a href="/p/bashextension/">
                
                    <img src="/images/OasisInDesert.png" loading="lazy" alt="Featured image of post Bashextension" />
                
            </a>
        </div>
    

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/" >
                计算机基础
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/p/bashextension/">Bashextension</a>
        </h2>
    
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Oct 15, 2025</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    阅读时长: 14 分钟
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <blockquote>
<p>学习参考的教程为<a class="link" href="https://wangdoc.com/bash/"  target="_blank" rel="noopener"
    >Bash 脚本教程 - 网道</a>，非常感谢开源工作者的贡献！</p>
<p>如使用到该教程，可随意使用但请标明出处</p>
</blockquote>
<h1 id="bash的模式拓展">Bash的模式拓展
</h1><h2 id="1简介">1.简介
</h2><blockquote>
<p>详见 <a class="link" href="https://wangdoc.com/bash/expansion"  target="_blank" rel="noopener"
    >Bash 的模式扩展 - Bash 脚本教程 - 网道</a></p>
</blockquote>
<p>注意：Bash 是先进行扩展，再执行命令。因此，<strong>扩展的结果是由 Bash 负责的</strong>，与所要执行的命令无关。<strong>命令本身并不存在参数扩展</strong>，收到什么参数就原样执行。这一点务必需要记住。</p>
<h2 id="2波浪线扩展">2.波浪线扩展
</h2><p>波浪线<code>~</code>会自动扩展成当前用户的主目录。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ <span class="nb">echo</span> ~
</span></span><span class="line"><span class="cl">/home/me
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>~/dir</code>表示扩展成主目录的某个子目录，<code>dir</code>是主目录里面的一个子目录名。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 进入 /home/me/foo 目录</span>
</span></span><span class="line"><span class="cl">$ <span class="nb">cd</span> ~/foo
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>~user</code>表示扩展成用户<code>user</code>的主目录。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ <span class="nb">echo</span> ~foo
</span></span><span class="line"><span class="cl">/home/foo
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">$ <span class="nb">echo</span> ~root
</span></span><span class="line"><span class="cl">/root
</span></span></code></pre></td></tr></table>
</div>
</div><p>上面例子中，Bash 会根据波浪号后面的用户名，返回该用户的主目录。</p>
<p>如果<code>~user</code>的<code>user</code>是不存在的用户名，则波浪号扩展不起作用。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ <span class="nb">echo</span> ~nonExistedUser
</span></span><span class="line"><span class="cl">~nonExistedUser
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>~+</code>会扩展成当前所在的目录，等同于<code>pwd</code>命令。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ <span class="nb">cd</span> ~/foo
</span></span><span class="line"><span class="cl">$ <span class="nb">echo</span> ~+
</span></span><span class="line"><span class="cl">/home/me/foo
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="3-字符扩展">3.<code>?</code> 字符扩展
</h2><p><code>?</code>字符<strong>代表文件路径里面的任意单个字符</strong>，不包括空字符。比如，<code>Data???</code>匹配所有<code>Data</code>后面跟着三个字符的文件名。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 存在文件 a.txt 和 b.txt</span>
</span></span><span class="line"><span class="cl">$ ls ?.txt
</span></span><span class="line"><span class="cl"><span class="c1"># 自动匹配符合格式的文件</span>
</span></span><span class="line"><span class="cl">a.txt b.txt
</span></span></code></pre></td></tr></table>
</div>
</div><p>上面命令中，<code>?</code>表示单个字符，所以会同时匹配<code>a.txt</code>和<code>b.txt</code>。</p>
<p>如果<strong>匹配多个字符</strong>，就<strong>需要多个<code>?</code>连用</strong>。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 存在文件 a.txt、b.txt 和 ab.txt</span>
</span></span><span class="line"><span class="cl">$ ls ??.txt
</span></span><span class="line"><span class="cl">ab.txt
</span></span></code></pre></td></tr></table>
</div>
</div><p>上面命令中，<code>??</code>匹配了两个字符。</p>
<p><code>?</code> 字符扩展属于<strong>文件名扩展</strong>，<strong>只有文件确实存在的前提下，才会发生扩展</strong>。如果文件不存在，扩展就不会发生。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 当前目录有 a.txt 文件</span>
</span></span><span class="line"><span class="cl">$ <span class="nb">echo</span> ?.txt
</span></span><span class="line"><span class="cl">a.txt
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 当前目录为空目录</span>
</span></span><span class="line"><span class="cl">$ <span class="nb">echo</span> ?.txt
</span></span><span class="line"><span class="cl">?.txt
</span></span></code></pre></td></tr></table>
</div>
</div><p>上面例子中，如果<code>?.txt</code>可以扩展成文件名，<code>echo</code>命令会输出扩展后的结果；如果不能扩展成文件名，<code>echo</code>就会原样输出<code>?.txt</code>。</p>
<h2 id="4-字符扩展">4.<code>*</code> 字符扩展
</h2><p><code>*</code>字符代表<strong>文件路径里面的任意数量的任意字符</strong>，<strong>包括零个字符</strong>。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 存在文件 a.txt、b.txt 和 ab.txt</span>
</span></span><span class="line"><span class="cl">$ ls *.txt
</span></span><span class="line"><span class="cl">a.txt b.txt ab.txt
</span></span></code></pre></td></tr></table>
</div>
</div><p>上面例子中，<code>*.txt</code>代表后缀名为<code>.txt</code>的所有文件。</p>
<p>如果想输出当前目录的所有文件，直接用<code>*</code>即可。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ ls *
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>*</code>可以匹配空字符，下面是一个例子。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 存在文件 a.txt、b.txt 和 ab.txt</span>
</span></span><span class="line"><span class="cl">$ ls a*.txt
</span></span><span class="line"><span class="cl">a.txt ab.txt
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">$ ls *b*
</span></span><span class="line"><span class="cl">b.txt ab.txt
</span></span></code></pre></td></tr></table>
</div>
</div><p>注意，<code>*</code>不会匹配隐藏文件（以<code>.</code>开头的文件），即**<code>ls *</code>不会输出隐藏文件**。</p>
<p>如果要匹配隐藏文件，需要写成<code>.*</code>。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 显示所有隐藏文件</span>
</span></span><span class="line"><span class="cl">$ <span class="nb">echo</span> .*
</span></span></code></pre></td></tr></table>
</div>
</div><p>如果要匹配隐藏文件，同时要排除<code>.</code>和<code>..</code>这两个特殊的隐藏文件，可以与方括号扩展结合使用，写成<code>.[!.]*</code>。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ <span class="nb">echo</span> .<span class="o">[</span>!.<span class="o">]</span>*
</span></span></code></pre></td></tr></table>
</div>
</div><p>注意，<code>*</code>字符扩展属于文件名扩展，只有文件确实存在的前提下才会扩展。如果文件不存在，就会原样输出。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># 当前目录不存在 c 开头的文件
</span></span><span class="line"><span class="cl">$ echo c*.txt
</span></span><span class="line"><span class="cl">c*.txt
</span></span></code></pre></td></tr></table>
</div>
</div><p>上面例子中，当前目录里面没有<code>c</code>开头的文件，导致<code>c*.txt</code>会原样输出。</p>
<p><strong><code>*</code>只匹配当前目录，不会匹配子目录</strong>。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 子目录有一个 a.txt</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 无效的写法</span>
</span></span><span class="line"><span class="cl">$ ls *.txt
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 有效的写法</span>
</span></span><span class="line"><span class="cl">$ ls */*.txt
</span></span></code></pre></td></tr></table>
</div>
</div><p>上面的例子，文本文件在子目录，<code>*.txt</code>不会产生匹配，必须写成<code>*/*.txt</code>。有几层子目录，就必须写几层星号。</p>
<p>Bash 4.0 引入了一个参数<code>globstar</code>，当该参数打开时，允许<code>**</code>匹配零个或多个子目录。因此，<code>**/*.txt</code>可以匹配顶层的文本文件和任意深度子目录的文本文件。详细介绍请看后面<code>shopt</code>命令的介绍。</p>
<p>另外，<code>ls *</code> 会：</p>
<ul>
<li>显示当前目录下的所有<strong>非隐藏文件名</strong>；</li>
<li>并且<strong>递归展开（仅一层）所有子目录的内容</strong>（即列出每个子目录里的文件和文件夹）。</li>
</ul>
<h2 id="5方括号扩展">5.方括号扩展
</h2><p>方括号扩展的形式是<code>[...]</code>，只有文件确实存在的前提下才会扩展。如果文件不存在，就会原样输出。<strong><code>[...]</code>会匹配括号之中的任意一个字符</strong>。比如，<code>[aeiou]</code>可以匹配五个元音字母中的任意一个。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 存在文件 a.txt 和 b.txt</span>
</span></span><span class="line"><span class="cl">$ ls <span class="o">[</span>ab<span class="o">]</span>.txt
</span></span><span class="line"><span class="cl">a.txt b.txt
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 只存在文件 a.txt</span>
</span></span><span class="line"><span class="cl">$ ls <span class="o">[</span>ab<span class="o">]</span>.txt
</span></span><span class="line"><span class="cl">a.txt
</span></span></code></pre></td></tr></table>
</div>
</div><p>上面例子中，<code>[ab]</code>可以匹配<code>a</code>或<code>b</code>，前提是确实存在相应的文件。</p>
<p>方括号扩展属于<strong>文件名匹配</strong>，即<strong>扩展后的结果必须符合现有的文件路径</strong>。如果不存在匹配，就会保持原样，不进行扩展。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 不存在文件 a.txt 和 b.txt</span>
</span></span><span class="line"><span class="cl">$ ls <span class="o">[</span>ab<span class="o">]</span>.txt
</span></span><span class="line"><span class="cl">ls: 无法访问<span class="s1">&#39;[ab].txt&#39;</span>: 没有那个文件或目录
</span></span></code></pre></td></tr></table>
</div>
</div><p>上面例子中，由于扩展后的文件不存在，<code>[ab].txt</code>就原样输出了，导致<code>ls</code>命名报错。</p>
<p>方括号扩展还有两种变体：<code>[^...]</code>和<code>[!...]</code>。它们表示<strong>匹配不在方括号里面的字符</strong>，这两种写法是等价的。比如，<code>[^abc]</code>或<code>[!abc]</code>表示匹配除了<code>a</code>、<code>b</code>、<code>c</code>以外的字符。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 存在 aaa、bbb、aba 三个文件</span>
</span></span><span class="line"><span class="cl">$ ls ?<span class="o">[</span>!a<span class="o">]</span>?
</span></span><span class="line"><span class="cl">aba bbb
</span></span></code></pre></td></tr></table>
</div>
</div><p>上面命令中，<code>[!a]</code>表示文件名第二个字符不是<code>a</code>的文件名，所以返回了<code>aba</code>和<code>bbb</code>两个文件。</p>
<p>注意，如果需要匹配<code>[</code>字符，可以放在方括号内，比如<code>[[aeiou]</code>。如果需要匹配连字号<code>-</code>，只能放在方括号内部的开头或结尾，比如<code>[-aeiou]</code>或<code>[aeiou-]</code>。</p>
<h2 id="6start-end-扩展">6.[start-end] 扩展
</h2><p>方括号扩展有一个简写形式**<code>[start-end]</code>，表示匹配一个连续的范围**。比如，<code>[a-c]</code>等同于<code>[abc]</code>，<code>[0-9]</code>匹配<code>[0123456789]</code>。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 存在文件 a.txt、b.txt 和 c.txt</span>
</span></span><span class="line"><span class="cl">$ ls <span class="o">[</span>a-c<span class="o">]</span>.txt
</span></span><span class="line"><span class="cl">a.txt
</span></span><span class="line"><span class="cl">b.txt
</span></span><span class="line"><span class="cl">c.txt
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 存在文件 report1.txt、report2.txt 和 report3.txt</span>
</span></span><span class="line"><span class="cl">$ ls report<span class="o">[</span>0-9<span class="o">]</span>.txt
</span></span><span class="line"><span class="cl">report1.txt
</span></span><span class="line"><span class="cl">report2.txt
</span></span><span class="line"><span class="cl">report3.txt
</span></span><span class="line"><span class="cl">...
</span></span></code></pre></td></tr></table>
</div>
</div><p>下面是一些<strong>常用简写的例子</strong>。</p>
<ul>
<li><code>[a-z]</code>：所有小写字母。</li>
<li><code>[a-zA-Z]</code>：所有小写字母与大写字母。</li>
<li><code>[a-zA-Z0-9]</code>：所有小写字母、大写字母与数字。</li>
<li><code>[abc]*</code>：所有以<code>a</code>、<code>b</code>、<code>c</code>字符之一开头的文件名。</li>
<li><code>program.[co]</code>：文件<code>program.c</code>与文件<code>program.o</code>。</li>
<li><code>BACKUP.[0-9][0-9][0-9]</code>：所有以<code>BACKUP.</code>开头，后面是三个数字的文件名。</li>
</ul>
<p>这种简写形式有一个否定形式<code>[!start-end]</code>，表示匹配不属于这个范围的字符。比如，<code>[!a-zA-Z]</code>表示匹配非英文字母的字符。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ ls report<span class="o">[</span>!1–3<span class="o">]</span>.txt
</span></span><span class="line"><span class="cl">report4.txt report5.txt
</span></span></code></pre></td></tr></table>
</div>
</div><p>上面代码中，<code>[!1-3]</code>表示排除1、2和3。</p>
<h2 id="7大括号扩展">7.大括号扩展
</h2><p><strong>大括号扩展<code>{...}</code>表示分别扩展成大括号里面的所有值，各个值之间使用逗号分隔</strong>。比如，<code>{1,2,3}</code>扩展成<code>1 2 3</code>。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ <span class="nb">echo</span> <span class="o">{</span>1,2,3<span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="m">1</span> <span class="m">2</span> <span class="m">3</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">$ <span class="nb">echo</span> d<span class="o">{</span>a,e,i,u,o<span class="o">}</span>g
</span></span><span class="line"><span class="cl">dag deg dig dug dog
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">$ <span class="nb">echo</span> Front-<span class="o">{</span>A,B,C<span class="o">}</span>-Back
</span></span><span class="line"><span class="cl">Front-A-Back Front-B-Back Front-C-Back
</span></span></code></pre></td></tr></table>
</div>
</div><p>注意，<strong>大括号扩展不是文件名扩展。它会扩展成所有给定的值，而不管是否有对应的文件存在。</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ ls <span class="o">{</span>a,b,c<span class="o">}</span>.txt
</span></span><span class="line"><span class="cl">ls: 无法访问<span class="s1">&#39;a.txt&#39;</span>: 没有那个文件或目录
</span></span><span class="line"><span class="cl">ls: 无法访问<span class="s1">&#39;b.txt&#39;</span>: 没有那个文件或目录
</span></span><span class="line"><span class="cl">ls: 无法访问<span class="s1">&#39;c.txt&#39;</span>: 没有那个文件或目录
</span></span></code></pre></td></tr></table>
</div>
</div><p>上面例子中，即使不存在对应的文件，<code>{a,b,c}</code>依然扩展成三个文件名，导致<code>ls</code>命令报了三个错误。</p>
<p>另一个需要注意的地方是，<strong>大括号内部的逗号前后不能有空格</strong>。否则，大括号扩展会失效。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ <span class="nb">echo</span> <span class="o">{</span><span class="m">1</span> , 2<span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">{</span><span class="m">1</span> , 2<span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>上面例子中，逗号前后有空格，Bash 就会认为这不是大括号扩展，而是三个独立的参数。</p>
<p><strong>逗号前面可以没有值，表示扩展的第一项为空</strong>。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ cp a.log<span class="o">{</span>,.bak<span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 等同于</span>
</span></span><span class="line"><span class="cl"><span class="c1"># cp a.log a.log.bak</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>大括号可以嵌套。</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ <span class="nb">echo</span> <span class="o">{</span>j<span class="o">{</span>p,pe<span class="o">}</span>g,png<span class="o">}</span>
</span></span><span class="line"><span class="cl">jpg jpeg png
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">$ <span class="nb">echo</span> a<span class="o">{</span>A<span class="o">{</span>1,2<span class="o">}</span>,B<span class="o">{</span>3,4<span class="o">}}</span>b
</span></span><span class="line"><span class="cl">aA1b aA2b aB3b aB4b
</span></span></code></pre></td></tr></table>
</div>
</div><p>大括号也可以与其他模式联用，并且总是先于其他模式进行扩展。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ <span class="nb">echo</span> /bin/<span class="o">{</span>cat,b*<span class="o">}</span>
</span></span><span class="line"><span class="cl">/bin/cat /bin/b2sum /bin/base32 /bin/base64 ... ...
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 基本等同于</span>
</span></span><span class="line"><span class="cl">$ <span class="nb">echo</span> /bin/cat<span class="p">;</span><span class="nb">echo</span> /bin/b*
</span></span></code></pre></td></tr></table>
</div>
</div><p>上面例子中，会先进行大括号扩展，然后进行<code>*</code>扩展，等同于执行两条<code>echo</code>命令。</p>
<p><strong>大括号可以用于多字符的模式，方括号不行（只能匹配单字符）。</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ <span class="nb">echo</span> <span class="o">{</span>cat,dog<span class="o">}</span>
</span></span><span class="line"><span class="cl">cat dog
</span></span></code></pre></td></tr></table>
</div>
</div><p>由于<strong>大括号扩展<code>{...}</code>不是文件名扩展，所以它总是会扩展的</strong>。这<strong>与方括号扩展<code>[...]</code>完全不同</strong>，如果匹配的文件不存在，方括号就不会扩展。这一点要注意区分。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 不存在 a.txt 和 b.txt</span>
</span></span><span class="line"><span class="cl">$ <span class="nb">echo</span> <span class="o">[</span>ab<span class="o">]</span>.txt
</span></span><span class="line"><span class="cl"><span class="o">[</span>ab<span class="o">]</span>.txt
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">$ <span class="nb">echo</span> <span class="o">{</span>a,b<span class="o">}</span>.txt
</span></span><span class="line"><span class="cl">a.txt b.txt
</span></span></code></pre></td></tr></table>
</div>
</div><p>上面例子中，如果不存在<code>a.txt</code>和<code>b.txt</code>，那么<code>[ab].txt</code>就会变成一个普通的文件名，而<code>{a,b}.txt</code>可以照样扩展。</p>
<h2 id="8startend-扩展">8.{start..end} 扩展
</h2><p>大括号扩展有一个简写形式<code>{start..end}</code>，<strong>表示扩展成一个连续序列</strong>。比如，<code>{a..z}</code>可以扩展成26个小写英文字母。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ <span class="nb">echo</span> <span class="o">{</span>a..c<span class="o">}</span>
</span></span><span class="line"><span class="cl">a b c
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">$ <span class="nb">echo</span> d<span class="o">{</span>a..d<span class="o">}</span>g
</span></span><span class="line"><span class="cl">dag dbg dcg ddg
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">$ <span class="nb">echo</span> <span class="o">{</span>1..4<span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="m">1</span> <span class="m">2</span> <span class="m">3</span> <span class="m">4</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">$ <span class="nb">echo</span> Number_<span class="o">{</span>1..5<span class="o">}</span>
</span></span><span class="line"><span class="cl">Number_1 Number_2 Number_3 Number_4 Number_5
</span></span></code></pre></td></tr></table>
</div>
</div><p>这种简写形式<strong>支持逆序</strong>。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ <span class="nb">echo</span> <span class="o">{</span>c..a<span class="o">}</span>
</span></span><span class="line"><span class="cl">c b a
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">$ <span class="nb">echo</span> <span class="o">{</span>5..1<span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="m">5</span> <span class="m">4</span> <span class="m">3</span> <span class="m">2</span> <span class="m">1</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>注意，如果遇到无法理解的简写，大括号模式就会原样输出，不会扩展。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ <span class="nb">echo</span> <span class="o">{</span>a1..3c<span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">{</span>a1..3c<span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>这种简写形式可以嵌套使用，形成复杂的扩展。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ <span class="nb">echo</span> .<span class="o">{</span>mp<span class="o">{</span>3..4<span class="o">}</span>,m4<span class="o">{</span>a,b,p,v<span class="o">}}</span>
</span></span><span class="line"><span class="cl">.mp3 .mp4 .m4a .m4b .m4p .m4v
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>大括号扩展的常见用途为新建一系列目录。</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ mkdir <span class="o">{</span>2007..2009<span class="o">}</span>-<span class="o">{</span>01..12<span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>上面命令会新建36个子目录，每个子目录的名字都是”年份-月份“。</p>
<p>这个写法的另一个常见用途，是<strong>直接用于<code>for</code>循环</strong>。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="k">for</span> i in <span class="o">{</span>1..4<span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="k">do</span>
</span></span><span class="line"><span class="cl">  <span class="nb">echo</span> <span class="nv">$i</span>
</span></span><span class="line"><span class="cl"><span class="k">done</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>上面例子会循环4次。</p>
<p>如果整数前面有前导<code>0</code>，扩展输出的每一项都有前导<code>0</code>。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ <span class="nb">echo</span> <span class="o">{</span>01..5<span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="m">01</span> <span class="m">02</span> <span class="m">03</span> <span class="m">04</span> <span class="m">05</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">$ <span class="nb">echo</span> <span class="o">{</span>001..5<span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="m">001</span> <span class="m">002</span> <span class="m">003</span> <span class="m">004</span> <span class="m">005</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>这种简写形式还可以<strong>使用第二个双点号（<code>start..end..step</code>），用来指定扩展的步长</strong>。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ <span class="nb">echo</span> <span class="o">{</span>0..8..2<span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="m">0</span> <span class="m">2</span> <span class="m">4</span> <span class="m">6</span> <span class="m">8</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>上面代码将<code>0</code>扩展到<code>8</code>，每次递增的长度为<code>2</code>，所以一共输出5个数字。</p>
<p>多个简写形式连用，会有循环处理的效果。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">$ echo {a..c}{1..3}
</span></span><span class="line"><span class="cl">a1 a2 a3 b1 b2 b3 c1 c2 c3
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="9变量扩展"><strong>9.变量扩展</strong>
</h2><p>Bash 将美元符号<code>$</code>开头的词元视为变量，将其扩展成变量值，详见《Bash 变量》一章。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">$ echo $SHELL
</span></span><span class="line"><span class="cl">/bin/bash
</span></span></code></pre></td></tr></table>
</div>
</div><p>变量名除了放在美元符号后面，也可以放在<code>${}</code>里面。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">$ echo ${SHELL}
</span></span><span class="line"><span class="cl">/bin/bash
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>${!string*}</code>或<code>${!string@}</code>返回所有匹配给定字符串<code>string</code>的变量名。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">$ echo ${!S*}
</span></span><span class="line"><span class="cl">SECONDS SHELL SHELLOPTS SHLVL SSH_AGENT_PID SSH_AUTH_SOCK
</span></span></code></pre></td></tr></table>
</div>
</div><p>上面例子中，<code>${!S*}</code>扩展成所有以<code>S</code>开头的变量名。</p>
<h2 id="10子命令扩展">10.子命令扩展
</h2><p><code>$(...)</code>可以扩展成另一个命令的运行结果，该命令的所有输出都会作为返回值。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">$ echo $(date)
</span></span><span class="line"><span class="cl">Tue Jan 28 00:01:13 CST 2020
</span></span></code></pre></td></tr></table>
</div>
</div><p>上面例子中，<code>$(date)</code>返回<code>date</code>命令的运行结果。</p>
<p>还有另一种较老的语法，子命令放在反引号之中，也可以扩展成命令的运行结果。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="err">$</span><span class="w"> </span><span class="n">echo</span><span class="w"> </span><span class="o">`</span><span class="kt">date</span><span class="o">`</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">Tue</span><span class="w"> </span><span class="n">Jan</span><span class="w"> </span><span class="mi">28</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mi">13</span><span class="w"> </span><span class="n">CST</span><span class="w"> </span><span class="mi">2020</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p><code>$(...)</code>可以嵌套，比如<code>$(ls $(pwd))</code>。</p>
<h2 id="11算术扩展">11.算术扩展
</h2><p><code>$((...))</code>可以扩展成整数运算的结果，详见《Bash 的算术运算》一章。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">$ echo $((2 + 2))
</span></span><span class="line"><span class="cl">4
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="12字符类">12.字符类
</h2><p><code>[[:class:]]</code>表示一个字符类，扩展成某一类特定字符之中的一个。常用的字符类如下。</p>
<ul>
<li><code>[[:alnum:]]</code>：匹配任意英文字母与数字</li>
<li><code>[[:alpha:]]</code>：匹配任意英文字母</li>
<li><code>[[:blank:]]</code>：空格和 Tab 键。</li>
<li><code>[[:cntrl:]]</code>：ASCII 码 0-31 的不可打印字符。</li>
<li><code>[[:digit:]]</code>：匹配任意数字 0-9。</li>
<li><code>[[:graph:]]</code>：A-Z、a-z、0-9 和标点符号。</li>
<li><code>[[:lower:]]</code>：匹配任意小写字母 a-z。</li>
<li><code>[[:print:]]</code>：ASCII 码 32-127 的可打印字符。</li>
<li><code>[[:punct:]]</code>：标点符号（除了 A-Z、a-z、0-9 的可打印字符）。</li>
<li><code>[[:space:]]</code>：空格、Tab、LF（10）、VT（11）、FF（12）、CR（13）。</li>
<li><code>[[:upper:]]</code>：匹配任意大写字母 A-Z。</li>
<li><code>[[:xdigit:]]</code>：16进制字符（A-F、a-f、0-9）。</li>
</ul>
<p>请看下面的例子。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">$ echo [[:upper:]]*
</span></span></code></pre></td></tr></table>
</div>
</div><p>上面命令输出所有大写字母开头的文件名。</p>
<p>字符类的第一个方括号后面，可以加上感叹号<code>!</code>（或<code>^</code>），表示否定。比如，<code>[![:digit:]]</code>(或<code>[^[:digit:]]</code>)匹配所有非数字。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">$ echo [![:digit:]]*
</span></span></code></pre></td></tr></table>
</div>
</div><p>上面命令输出所有不以数字开头的文件名。</p>
<p>字符类也属于文件名扩展，如果没有匹配的文件名，字符类就会原样输出。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># 不存在以大写字母开头的文件
</span></span><span class="line"><span class="cl">$ echo [[:upper:]]*
</span></span><span class="line"><span class="cl">[[:upper:]]*
</span></span></code></pre></td></tr></table>
</div>
</div><p>上面例子中，由于没有可匹配的文件，字符类就原样输出了。</p>
<h2 id="13使用注意点">13.使用注意点
</h2><p>通配符有一些使用注意点，不可不知。</p>
<p><strong>（1）通配符是先解释，再执行。</strong></p>
<p>Bash 接收到命令以后，发现里面有通配符，会进行通配符扩展，然后再执行命令。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">$ ls a*.txt
</span></span><span class="line"><span class="cl">ab.txt
</span></span></code></pre></td></tr></table>
</div>
</div><p>上面命令的执行过程是，Bash 先将<code>a*.txt</code>扩展成<code>ab.txt</code>，然后再执行<code>ls ab.txt</code>。</p>
<p><strong>（2）文件名扩展在不匹配时，会原样输出。</strong></p>
<p>文件名扩展在没有可匹配的文件时，会原样输出。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># 不存在 r 开头的文件名
</span></span><span class="line"><span class="cl">$ echo r*
</span></span><span class="line"><span class="cl">r*
</span></span></code></pre></td></tr></table>
</div>
</div><p>上面代码中，由于不存在<code>r</code>开头的文件名，<code>r*</code>会原样输出。</p>
<p>下面是另一个例子。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">$ ls *.csv
</span></span><span class="line"><span class="cl">ls: *.csv: No such file or directory
</span></span></code></pre></td></tr></table>
</div>
</div><p>另外，前面已经说过，大括号扩展<code>{...}</code>不是文件名扩展。</p>
<p><strong>（3）只适用于单层路径。</strong></p>
<p>所有文件名扩展只匹配单层路径，不能跨目录匹配，即无法匹配子目录里面的文件。或者说，<code>?</code>或<code>*</code>这样的通配符，不能匹配路径分隔符（<code>/</code>）。</p>
<p>如果要匹配子目录里面的文件，可以写成下面这样。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">$ ls */*.txt
</span></span></code></pre></td></tr></table>
</div>
</div><p>Bash 4.0 新增了一个<code>globstar</code>参数，允许<code>**</code>匹配零个或多个子目录，详见后面<code>shopt</code>命令的介绍。</p>
<p><strong>（4）文件名可以使用通配符。</strong></p>
<p>Bash 允许文件名使用通配符，即文件名包括特殊字符。这时引用文件名，需要把文件名放在单引号或双引号里面。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">$ touch &#39;fo*&#39;
</span></span><span class="line"><span class="cl">$ ls
</span></span><span class="line"><span class="cl">fo*
</span></span></code></pre></td></tr></table>
</div>
</div><p>上面代码创建了一个<code>fo*</code>文件，这时<code>*</code>就是文件名的一部分。</p>
<h2 id="14量词语法">14.量词语法
</h2><p>量词语法用来控制模式匹配的次数。它只有在 Bash 的<code>extglob</code>参数打开的情况下才能使用，不过一般是默认打开的。下面的命令可以查询。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">$ shopt extglob
</span></span><span class="line"><span class="cl">extglob        	on
</span></span></code></pre></td></tr></table>
</div>
</div><p>如果<code>extglob</code>参数是关闭的，可以用下面的命令打开。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">$ shopt -s extglob
</span></span></code></pre></td></tr></table>
</div>
</div><p>量词语法有下面几个。</p>
<ul>
<li><code>?(pattern-list)</code>：模式匹配零次或一次。</li>
<li><code>*(pattern-list)</code>：模式匹配零次或多次。</li>
<li><code>+(pattern-list)</code>：模式匹配一次或多次。</li>
<li><code>@(pattern-list)</code>：只匹配一次模式。</li>
<li><code>!(pattern-list)</code>：匹配给定模式以外的任何内容。</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">$ ls abc?(.)txt
</span></span><span class="line"><span class="cl">abctxt abc.txt
</span></span></code></pre></td></tr></table>
</div>
</div><p>上面例子中，<code>?(.)</code>匹配零个或一个点。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">$ ls abc?(def)
</span></span><span class="line"><span class="cl">abc abcdef
</span></span></code></pre></td></tr></table>
</div>
</div><p>上面例子中，<code>?(def)</code>匹配零个或一个<code>def</code>。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">$ ls abc@(.txt|.php)
</span></span><span class="line"><span class="cl">abc.php abc.txt
</span></span></code></pre></td></tr></table>
</div>
</div><p>上面例子中，<code>@(.txt|.php)</code>匹配文件有且只有一个<code>.txt</code>或<code>.php</code>后缀名。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">$ ls abc+(.txt)
</span></span><span class="line"><span class="cl">abc.txt abc.txt.txt
</span></span></code></pre></td></tr></table>
</div>
</div><p>上面例子中，<code>+(.txt)</code>匹配文件有一个或多个<code>.txt</code>后缀名。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">$ ls a!(b).txt
</span></span><span class="line"><span class="cl">a.txt abb.txt ac.txt
</span></span></code></pre></td></tr></table>
</div>
</div><p>上面例子中，<code>!(b)</code>表示匹配单个字母<code>b</code>以外的任意内容，所以除了<code>ab.txt</code>以外，其他文件名都能匹配。</p>
<p>量词语法也属于文件名扩展，如果不存在可匹配的文件，就会原样输出。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># 没有 abc 开头的文件名
</span></span><span class="line"><span class="cl">$ ls abc?(def)
</span></span><span class="line"><span class="cl">ls: 无法访问&#39;abc?(def)&#39;: 没有那个文件或目录
</span></span></code></pre></td></tr></table>
</div>
</div><p>上面例子中，由于没有可匹配的文件，<code>abc?(def)</code>就原样输出，导致<code>ls</code>命令报错。</p>
<h2 id="15shopt-命令">15.shopt 命令
</h2><p><code>shopt</code>命令可以调整 Bash 的行为。它有好几个参数跟通配符扩展有关。</p>
<p><code>shopt</code>命令的使用方法如下。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># 打开某个参数
</span></span><span class="line"><span class="cl">$ shopt -s [optionname]
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># 关闭某个参数
</span></span><span class="line"><span class="cl">$ shopt -u [optionname]
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># 查询某个参数关闭还是打开
</span></span><span class="line"><span class="cl">$ shopt [optionname]
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>（1）dotglob 参数</strong></p>
<p><code>dotglob</code>参数可以让扩展结果包括隐藏文件（即点开头的文件）。</p>
<p>正常情况下，扩展结果不包括隐藏文件。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">$ ls *
</span></span><span class="line"><span class="cl">abc.txt
</span></span></code></pre></td></tr></table>
</div>
</div><p>打开<code>dotglob</code>，就会包括隐藏文件。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">$ shopt -s dotglob
</span></span><span class="line"><span class="cl">$ ls *
</span></span><span class="line"><span class="cl">abc.txt .config
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>（2）nullglob 参数</strong></p>
<p><code>nullglob</code>参数可以让通配符不匹配任何文件名时，返回空字符。</p>
<p>默认情况下，通配符不匹配任何文件名时，会保持不变。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">$ rm b*
</span></span><span class="line"><span class="cl">rm: 无法删除&#39;b*&#39;: 没有那个文件或目录
</span></span></code></pre></td></tr></table>
</div>
</div><p>上面例子中，由于当前目录不包括<code>b</code>开头的文件名，导致<code>b*</code>不会发生文件名扩展，保持原样不变，所以<code>rm</code>命令报错没有<code>b*</code>这个文件。</p>
<p>打开<code>nullglob</code>参数，就可以让不匹配的通配符返回空字符串。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">$ shopt -s nullglob
</span></span><span class="line"><span class="cl">$ rm b*
</span></span><span class="line"><span class="cl">rm: 缺少操作数
</span></span></code></pre></td></tr></table>
</div>
</div><p>上面例子中，由于没有<code>b*</code>匹配的文件名，所以<code>rm b*</code>扩展成了<code>rm</code>，导致报错变成了”缺少操作数“。</p>
<p><strong>（3）failglob 参数</strong></p>
<p><code>failglob</code>参数使得通配符不匹配任何文件名时，Bash 会直接报错，而不是让各个命令去处理。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">$ shopt -s failglob
</span></span><span class="line"><span class="cl">$ rm b*
</span></span><span class="line"><span class="cl">bash: 无匹配: b*
</span></span></code></pre></td></tr></table>
</div>
</div><p>上面例子中，打开<code>failglob</code>以后，由于<code>b*</code>不匹配任何文件名，Bash 直接报错了，不再让<code>rm</code>命令去处理。</p>
<p><strong>（4）extglob 参数</strong></p>
<p><code>extglob</code>参数使得 Bash 支持 ksh 的一些扩展语法。它默认应该是打开的。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">$ shopt extglob
</span></span><span class="line"><span class="cl">extglob        	on
</span></span></code></pre></td></tr></table>
</div>
</div><p>它的主要应用是支持量词语法。如果不希望支持量词语法，可以用下面的命令关闭。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">$ shopt -u extglob
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>（5）nocaseglob 参数</strong></p>
<p><code>nocaseglob</code>参数可以让通配符扩展不区分大小写。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">$ shopt -s nocaseglob
</span></span><span class="line"><span class="cl">$ ls /windows/program*
</span></span><span class="line"><span class="cl">/windows/ProgramData
</span></span><span class="line"><span class="cl">/windows/Program Files
</span></span><span class="line"><span class="cl">/windows/Program Files (x86)
</span></span></code></pre></td></tr></table>
</div>
</div><p>上面例子中，打开<code>nocaseglob</code>以后，<code>program*</code>就不区分大小写了，可以匹配<code>ProgramData</code>等。</p>
<p><strong>（6）globstar 参数</strong></p>
<p><code>globstar</code>参数可以使得<code>**</code>匹配零个或多个子目录。该参数默认是关闭的。</p>
<p>假设有下面的文件结构。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">a.txt
</span></span><span class="line"><span class="cl">sub1/b.txt
</span></span><span class="line"><span class="cl">sub1/sub2/c.txt
</span></span></code></pre></td></tr></table>
</div>
</div><p>上面的文件结构中，顶层目录、第一级子目录<code>sub1</code>、第二级子目录<code>sub1\sub2</code>里面各有一个文本文件。请问怎样才能使用通配符，将它们显示出来？</p>
<p>默认情况下，只能写成下面这样。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">$ ls *.txt */*.txt */*/*.txt
</span></span><span class="line"><span class="cl">a.txt  sub1/b.txt  sub1/sub2/c.txt
</span></span></code></pre></td></tr></table>
</div>
</div><p>这是因为<code>*</code>只匹配当前目录，如果要匹配子目录，只能一层层写出来。</p>
<p>打开<code>globstar</code>参数以后，<code>**</code>匹配零个或多个子目录。因此，<code>**/*.txt</code>就可以得到想要的结果。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">$ shopt -s globstar
</span></span><span class="line"><span class="cl">$ ls **/*.txt
</span></span><span class="line"><span class="cl">a.txt  sub1/b.txt  sub1/sub2/c.txt
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<h2 id="参考链接">参考链接
</h2><ul>
<li><a class="link" href="https://medium.com/@leedowthwaite/why-most-people-only-think-they-understand-wildcards-63bb9c2024ab"  target="_blank" rel="noopener"
    >Think You Understand Wildcards? Think Again</a></li>
<li><a class="link" href="https://appcodelabs.com/advanced-wildcard-patterns-most-people-dont-know"  target="_blank" rel="noopener"
    >Advanced Wildcard Patterns Most People Don’t Know</a></li>
</ul>
</blockquote>

</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/bash/">Bash</a>
        
    </section>


    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">相关文章</h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="has-image">
    <a href="/p/bash_introgrammar/">
        
        
            <div class="article-image">
                
                    <img src="/images/Cloud.png" loading="lazy" data-key="" data-hash="/images/Cloud.png"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Bash_intro&amp;grammar</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/p/bash/">
        
        
            <div class="article-image">
                
                    <img src="/images/Cat&amp;Tree.png" loading="lazy" data-key="" data-hash="/images/Cat&amp;Tree.png"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Bash</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/p/docker-commands/">
        
        
            <div class="article-image">
                
                    <img src="/images/TrippyWave.png" loading="lazy" data-key="" data-hash="/images/TrippyWave.png"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Docker Commands</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/p/quick-git/">
        
        
            <div class="article-image">
                
                    <img src="/images/PacificRim_02.PNG" loading="lazy" data-key="" data-hash="/images/PacificRim_02.PNG"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Quick Git</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/p/quick-java/">
        
        
            <div class="article-image">
                
                    <img src="/images/Lover.PNG" loading="lazy" data-key="" data-hash="/images/Lover.PNG"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Quick Java</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    <script
    src="https://giscus.app/client.js"
    data-repo=""
    data-repo-id=""
    data-category=""
    data-category-id=""
    data-mapping="title"
    data-strict="0"
    data-reactions-enabled="1"
    data-emit-metadata="0"
    data-input-position="top"
    data-theme="light"
    data-lang="zh-cn"
    data-loading=""
    crossorigin="anonymous"
    async
></script>
<script>
    function setGiscusTheme(theme) {
        let giscus = document.querySelector("iframe.giscus-frame");
        if (giscus) {
            giscus.contentWindow.postMessage(
                {
                    giscus: {
                        setConfig: {
                            theme: theme,
                        },
                    },
                },
                "https://giscus.app"
            );
        }
    }

    (function () {
        addEventListener("message", (e) => {
            if (event.origin !== "https://giscus.app") return;
            handler();
        });
        window.addEventListener("onColorSchemeChange", handler);

        function handler() {
            if (document.documentElement.dataset.scheme === "light") {
                setGiscusTheme('light');
            } else {
                setGiscusTheme('dark_dimmed');
            }
        }
    })();
</script>

    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2023 - 
        
        2025 Ch0ser
    </section>
    
    <section class="powerby">
        
            © 2023-2025 Ch0ser. All Rights Reserved. <br/>
        使用 <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> 构建 <br />
        主题 <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.29.0">Stack</a></b> 由 <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> 设计
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.02491b20957ce34c6cbaef143130153bbb70fa8c594c64eb104a00e20fbf9273.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
