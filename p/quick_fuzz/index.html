<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head><meta name="google-site-verification" content="_dAX7uDJJKRVjb0t7Il5zqA-h6sCbbvn9ktsHN2jbBE" />
<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content="QuickFuzz\rFuzzå…¥é—¨ï¼Œå­¦ä¹ å‚è€ƒï¼šBaby Fuzz Â· Homeï¼ŒBV1ZM4m1R7gZ\næ¨¡ç³Šæµ‹è¯•ç†è®ºä¸å·¥å…·å®è·µ\ræ€»è§ˆ\ræ¨¡ç³Šæµ‹è¯•åˆç§°ä¸ºfuzzingï¼Œæ˜¯ä¸€ç§è½¯ä»¶æµ‹è¯•æŠ€æœ¯ã€‚å…¶æ ¸å¿ƒæ¦‚å¿µä¸ºè‡ªåŠ¨äº§ç”Ÿéšæœºè¾“å…¥åˆ°ä¸€ä¸ªç¨‹åºä¸­ï¼Œå¹¶ç›‘è§†ç¨‹åºå¼‚å¸¸ï¼Œå¦‚å´©æºƒã€æ–­è¨€å¤±è´¥ï¼Œä»¥å‘ç°å¯èƒ½çš„ç¨‹åºé”™è¯¯ã€‚\n">
<title>Quick_fuzz</title>

<link rel='canonical' href='https://ch0ser.github.io/p/quick_fuzz/'>

<link rel="stylesheet" href="/scss/style.min.1201c8ab45413b73b1ec6aba6f2b0472235e87ce5b68fda0c895e540afbe2423.css"><meta property='og:title' content="Quick_fuzz">
<meta property='og:description' content="QuickFuzz\rFuzzå…¥é—¨ï¼Œå­¦ä¹ å‚è€ƒï¼šBaby Fuzz Â· Homeï¼ŒBV1ZM4m1R7gZ\næ¨¡ç³Šæµ‹è¯•ç†è®ºä¸å·¥å…·å®è·µ\ræ€»è§ˆ\ræ¨¡ç³Šæµ‹è¯•åˆç§°ä¸ºfuzzingï¼Œæ˜¯ä¸€ç§è½¯ä»¶æµ‹è¯•æŠ€æœ¯ã€‚å…¶æ ¸å¿ƒæ¦‚å¿µä¸ºè‡ªåŠ¨äº§ç”Ÿéšæœºè¾“å…¥åˆ°ä¸€ä¸ªç¨‹åºä¸­ï¼Œå¹¶ç›‘è§†ç¨‹åºå¼‚å¸¸ï¼Œå¦‚å´©æºƒã€æ–­è¨€å¤±è´¥ï¼Œä»¥å‘ç°å¯èƒ½çš„ç¨‹åºé”™è¯¯ã€‚\n">
<meta property='og:url' content='https://ch0ser.github.io/p/quick_fuzz/'>
<meta property='og:site_name' content='Choser&#39;s Blog'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='Fuzz' /><meta property='article:published_time' content='2025-10-14T14:40:02&#43;08:00'/><meta property='article:modified_time' content='2025-10-14T14:40:02&#43;08:00'/><meta property='og:image' content='https://ch0ser.github.io/images/greenland.png' />
<meta name="twitter:title" content="Quick_fuzz">
<meta name="twitter:description" content="QuickFuzz\rFuzzå…¥é—¨ï¼Œå­¦ä¹ å‚è€ƒï¼šBaby Fuzz Â· Homeï¼ŒBV1ZM4m1R7gZ\næ¨¡ç³Šæµ‹è¯•ç†è®ºä¸å·¥å…·å®è·µ\ræ€»è§ˆ\ræ¨¡ç³Šæµ‹è¯•åˆç§°ä¸ºfuzzingï¼Œæ˜¯ä¸€ç§è½¯ä»¶æµ‹è¯•æŠ€æœ¯ã€‚å…¶æ ¸å¿ƒæ¦‚å¿µä¸ºè‡ªåŠ¨äº§ç”Ÿéšæœºè¾“å…¥åˆ°ä¸€ä¸ªç¨‹åºä¸­ï¼Œå¹¶ç›‘è§†ç¨‹åºå¼‚å¸¸ï¼Œå¦‚å´©æºƒã€æ–­è¨€å¤±è´¥ï¼Œä»¥å‘ç°å¯èƒ½çš„ç¨‹åºé”™è¯¯ã€‚\n"><meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content='https://ch0ser.github.io/images/greenland.png' />
    <link rel="shortcut icon" href="/favicon.ico" />

    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="åˆ‡æ¢èœå•">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    <img src="/panda.jpeg" width="300" height="300" class="site-logo" loading="lazy" alt="Avatar">
                
                </a>
                
                    <span class="emoji">ğŸ”¥</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">Choser&#39;s Blog</a></h1>
            <h2 class="site-description">è¿›ä¸€å¯¸æœ‰è¿›ä¸€å¯¸çš„æ¬¢å–œ</h2>
        </div>
    </header><ol class="menu-social">
            
                <li>
                    <a 
                        href='https://github.com/Ch0ser'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='mailto:ch0ser@qq.com'
                        target="_blank"
                        title="âœ‰ï¸ Email"
                        rel="me"
                    >
                        
                        
                            <?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1760270206847" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5175" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><path d="M858.656 192 165.344 192C109.472 192 64 237.44 64 293.312l0 469.376C64 818.56 109.472 864 165.344 864l693.312 0C914.528 864 960 818.56 960 762.688L960 293.312C960 237.44 914.528 192 858.656 192zM858.656 800 165.344 800C144.736 800 128 783.264 128 762.688L128 293.312C128 272.736 144.736 256 165.344 256l684.544 0-307.488 279.808c-14.592 14.56-38.272 14.528-54.752-1.792l-244.256-206.752C229.856 315.84 209.664 317.504 198.272 331.008c-11.424 13.472-9.76 33.664 3.744 45.088l242.304 204.96c19.904 19.904 46.048 29.792 72.032 29.792 25.632 0 51.136-9.632 70.176-28.736L896 300.544l0 462.144C896 783.264 879.264 800 858.656 800z" fill="#5D646F" p-id="5176"></path></svg>
                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>é¦–é¡µ</span>
            </a>
        </li>
        
        
        <li >
            <a href='/about/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>å…³äºæˆ‘</span>
            </a>
        </li>
        
        
        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>æœç´¢</span>
            </a>
        </li>
        
        
        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>å½’æ¡£</span>
            </a>
        </li>
        
        
        <li >
            <a href='/tags/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-tag" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11 3L20 12a1.5 1.5 0 0 1 0 2L14 20a1.5 1.5 0 0 1 -2 0L3 11v-4a4 4 0 0 1 4 -4h4" />
  <circle cx="9" cy="9" r="2" />
</svg>



                
                <span>æ ‡ç­¾</span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">

                
                    <li>
                        <a href="/guestbook/">
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-messages" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M21 14l-3 -3h-7a1 1 0 0 1 -1 -1v-6a1 1 0 0 1 1 -1h9a1 1 0 0 1 1 1v10" />
  <path d="M14 15v2a1 1 0 0 1 -1 1h-7l-3 3v-10a1 1 0 0 1 1 -1h2" />
</svg>



                            <span>ç•™è¨€æ¿</span>
                        </a>
                    </li>
                

                
                    <li id="dark-mode-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <span>æš—è‰²æ¨¡å¼</span>
                    </li>
                
            </ol>
        </li>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">ç›®å½•</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#æ¨¡ç³Šæµ‹è¯•ç†è®ºä¸å·¥å…·å®è·µ">æ¨¡ç³Šæµ‹è¯•ç†è®ºä¸å·¥å…·å®è·µ</a></li>
    <li><a href="#æ€»è§ˆ">æ€»è§ˆ</a>
      <ol>
        <li><a href="#ä¸¾ä¾‹">ä¸¾ä¾‹</a></li>
      </ol>
    </li>
    <li><a href="#å†…éƒ¨æ¶æ„">å†…éƒ¨æ¶æ„</a></li>
    <li><a href="#aflamerican-fuzz-loop">AFL(American Fuzz Loop)</a></li>
    <li><a href="#fuzzæ–¹å¼">Fuzzæ–¹å¼</a></li>
    <li><a href="#ç¯å¢ƒæ­å»º">ç¯å¢ƒæ­å»º</a>
      <ol>
        <li><a href="#å®‰è£…">å®‰è£…</a></li>
      </ol>
    </li>
    <li><a href="#aflamerican-fuzz-loop-1">AFL(American Fuzz Loop)</a>
      <ol>
        <li><a href="#æ’æ¡©instrumentation">æ’æ¡©ï¼ˆinstrumentationï¼‰</a></li>
        <li><a href="#ç‰¹ç‚¹">ç‰¹ç‚¹ï¼š</a></li>
      </ol>
    </li>
    <li><a href="#demo">Demo</a>
      <ol>
        <li><a href="#afl-gcc">afl-gcc</a></li>
        <li><a href="#afl-as">afl-as</a></li>
        <li><a href="#afl-fuzz">afl-fuzz</a></li>
      </ol>
    </li>
    <li><a href="#crashåˆ†æ">Crashåˆ†æ</a></li>
    <li><a href="#sanitizer">Sanitizer</a></li>
    <li><a href="#addresssanitizeråŸç†ç®€ä»‹">AddressSanitizeråŸç†ç®€ä»‹</a>
      <ol>
        <li><a href="#å †å¯¹è±¡åˆ†é…">å †å¯¹è±¡åˆ†é…</a></li>
        <li><a href="#å †æ ˆå˜é‡">å †æ ˆå˜é‡</a></li>
        <li><a href="#é¢å¤–çš„å¼€é”€">é¢å¤–çš„å¼€é”€</a></li>
      </ol>
    </li>
    <li><a href="#å®æˆ˜æ¼”ç¤º-libpng">å®æˆ˜æ¼”ç¤º-libpng</a>
      <ol>
        <li><a href="#0x0ç¼–è¯‘fuzzç›®æ ‡">0x0.ç¼–è¯‘fuzzç›®æ ‡</a></li>
        <li><a href="#0x1å‡†å¤‡ç¯å¢ƒå‡†å¤‡ç§å­">0x1.å‡†å¤‡ç¯å¢ƒ(å‡†å¤‡ç§å­)</a></li>
        <li><a href="#0x2å¼€å§‹fuzzhttpslidaxian121githubiopostsfuzz0x2å¼€å§‹fuzz">0x2.å¼€å§‹fuzz<a href="https://lidaxian121.github.io/posts/fuzz/#0x2%E5%BC%80%E5%A7%8Bfuzz">#</a></a></li>
        <li><a href="#0x3æŠ¥é”™å¤„ç†å¦‚æœå®‰è£…åœ¨ç³»ç»Ÿä¸Šæ—¶">0x3.æŠ¥é”™å¤„ç†(å¦‚æœå®‰è£…åœ¨ç³»ç»Ÿä¸Šæ—¶)</a></li>
      </ol>
    </li>
    <li><a href="#æ€»ç»“">æ€»ç»“</a></li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="has-image main-article">
    <header class="article-header">
        <div class="article-image">
            <a href="/p/quick_fuzz/">
                
                    <img src="/images/greenland.png" loading="lazy" alt="Featured image of post Quick_fuzz" />
                
            </a>
        </div>
    

    <div class="article-details">
    
    <header class="article-category" style="margin-left: 11px !important;">
        
        
            
            
            
                <a href="/categories/%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%AE%89%E5%85%A8/" style="background-color: #725e82 !important; color: #f9fafb !important; border-radius: 6px; padding: 8px 12px !important; font-weight: 600; line-height: 1.6 !important; text-decoration: none;">
                    äºŒè¿›åˆ¶å®‰å…¨
                </a>
            
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/p/quick_fuzz/">Quick_fuzz</a>
        </h2>
    
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Oct 14, 2025</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    é˜…è¯»æ—¶é•¿: 7 åˆ†é’Ÿ
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <h1 id="quickfuzz">QuickFuzz
</h1><blockquote>
<p>Fuzzå…¥é—¨ï¼Œå­¦ä¹ å‚è€ƒï¼š<a class="link" href="https://lidaxian121.github.io/posts/fuzz/"  target="_blank" rel="noopener"
    >Baby Fuzz Â· Home</a>ï¼ŒBV1ZM4m1R7gZ</p>
</blockquote>
<h2 id="æ¨¡ç³Šæµ‹è¯•ç†è®ºä¸å·¥å…·å®è·µ">æ¨¡ç³Šæµ‹è¯•ç†è®ºä¸å·¥å…·å®è·µ
</h2><h2 id="æ€»è§ˆ">æ€»è§ˆ
</h2><p><strong>æ¨¡ç³Šæµ‹è¯•</strong>åˆç§°ä¸ºfuzzingï¼Œæ˜¯ä¸€ç§è½¯ä»¶æµ‹è¯•æŠ€æœ¯ã€‚å…¶æ ¸å¿ƒæ¦‚å¿µä¸º<strong>è‡ªåŠ¨</strong>äº§ç”Ÿ<strong>éšæœºè¾“å…¥</strong>åˆ°ä¸€ä¸ªç¨‹åºä¸­ï¼Œå¹¶ç›‘è§†ç¨‹åºå¼‚å¸¸ï¼Œå¦‚å´©æºƒã€æ–­è¨€å¤±è´¥ï¼Œä»¥å‘ç°å¯èƒ½çš„ç¨‹åºé”™è¯¯ã€‚</p>
<hr>
<h3 id="ä¸¾ä¾‹">ä¸¾ä¾‹
</h3><p>æµ‹è¯•.c:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="c1">// gcc -o test test.c
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;unistd.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">char</span> <span class="n">input</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">};</span>
</span></span><span class="line"><span class="cl">    <span class="nf">read</span><span class="p">(</span><span class="n">STDIN_FILENO</span><span class="p">,</span> <span class="n">input</span><span class="p">,</span> <span class="mi">8</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">input</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;A&#39;</span> <span class="o">&amp;&amp;</span> <span class="n">input</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;B&#39;</span><span class="p">)</span> <span class="c1">// (1)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="o">*</span><span class="p">((</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="o">*</span><span class="p">)</span><span class="mi">0</span><span class="p">)</span> <span class="o">=</span> <span class="mh">0xdeadbeef</span><span class="p">;</span> <span class="c1">// (2)ï¼Œå°†ç©ºæŒ‡é’ˆèµ‹å€¼ä¸º0xdeadbeefï¼Œå¼•å‘ç¨‹åºå´©æºƒ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nf">write</span><span class="p">(</span><span class="n">STDOUT_FILENO</span><span class="p">,</span> <span class="n">input</span><span class="p">,</span> <span class="mi">8</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<p>æ¨¡ç³Šå™¨.pyï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">subprocess</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">target</span> <span class="o">=</span> <span class="s1">&#39;./test&#39;</span>
</span></span><span class="line"><span class="cl"><span class="n">inps</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;AA&#39;</span><span class="p">,</span> <span class="s1">&#39;BB&#39;</span><span class="p">,</span> <span class="s1">&#39;BA&#39;</span><span class="p">,</span> <span class="s1">&#39;AB&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="n">inp</span> <span class="ow">in</span> <span class="n">inps</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="o">//</span> <span class="n">ä¸æ–­æµ‹è¯•å“ªäº›è¾“å…¥ä¼šå¼•å‘ç¨‹åºå´©æºƒ</span>
</span></span><span class="line"><span class="cl">    <span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">([</span><span class="n">target</span><span class="p">],</span> <span class="nb">input</span><span class="o">=</span><span class="n">inp</span><span class="o">.</span><span class="n">encode</span><span class="p">(),</span> <span class="n">capture_output</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">check</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">except</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">CalledProcessError</span><span class="p">:</span> <span class="c1"># (1)</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;bug found with input: &#39;</span><span class="si">{</span><span class="n">inp</span><span class="si">}</span><span class="s2">&#39;&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># (output)</span>
</span></span><span class="line"><span class="cl"><span class="c1"># bug found with input: &#39;AB&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<h2 id="å†…éƒ¨æ¶æ„">å†…éƒ¨æ¶æ„
</h2><hr>
<p><strong>åœ¨æ‰§è¡Œæ—¶ä¼šå› ä¸ºä¸åŒçš„æ¡ä»¶æ‰§è¡Œä¸åŒçš„ç¨‹åºç ï¼Œè€Œä¸åŒ</strong>çš„æ¡ä»¶ä¸»è¦<code>if</code>å°±æ˜¯å®šä¹‰</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="k">if</span> <span class="p">(</span><span class="n">a</span> <span class="o">==</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="n">b</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nf">puts</span><span class="p">(</span><span class="s">&#34;condition 1&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="k">else</span>
</span></span><span class="line"><span class="cl">    <span class="nf">puts</span><span class="p">(</span><span class="s">&#34;condition 2&#34;</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="https://github.com/u1f383/fuzzing-learning-in-30-days/raw/main/images/2-0.png"
	
	
	
	loading="lazy"
	
		alt="img"
	
	
></p>
<hr>
<p>IDA proç”Ÿäº§å‡ºæ¥çš„æŒ‡ä»¤çº§åˆ«çš„<strong>æ§åˆ¶æµå›¾</strong>(CFG)</p>
<p><img src="https://github.com/u1f383/fuzzing-learning-in-30-days/raw/main/images/2-1.png"
	
	
	
	loading="lazy"
	
		alt="img"
	
	
></p>
<hr>
<p>fuzzingæµç¨‹å¤§è‡´å¯ä»¥æ‹†æˆä¸‰ä¸ªç»„ä»¶åˆ†åˆ«ä¸ºï¼š</p>
<p>1.ç§å­é€‰æ‹©ã€2.çªå˜ã€3.è¦†ç›–èŒƒå›´ã€‚</p>
<p><img src="https://github.com/u1f383/fuzzing-learning-in-30-days/raw/main/images/2-2.png"
	
	
	
	loading="lazy"
	
		alt="img"
	
	
></p>
<hr>
<p>ä¸¾ä¾‹ï¼š</p>
<p>æµ‹è¯•.c</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="c1">// gcc -o test test.c
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;unistd.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">char</span> <span class="n">input</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">};</span>
</span></span><span class="line"><span class="cl">    <span class="nf">read</span><span class="p">(</span><span class="n">STDIN_FILENO</span><span class="p">,</span> <span class="n">input</span><span class="p">,</span> <span class="mi">8</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">input</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;A&#39;</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nf">puts</span><span class="p">(</span><span class="s">&#34;AAA&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">input</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;B&#39;</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">           <span class="nf">puts</span><span class="p">(</span><span class="s">&#34;BBB&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">           <span class="k">if</span> <span class="p">(</span><span class="n">input</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;C&#39;</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="o">*</span><span class="p">((</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="o">*</span><span class="p">)</span><span class="mi">0</span><span class="p">)</span> <span class="o">=</span> <span class="mh">0xdeadbeef</span><span class="p">;</span> <span class="c1">// bug
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>           <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<p>æµ‹è¯•å™¨.py</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">subprocess</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">random</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">target</span> <span class="o">=</span> <span class="s1">&#39;./test&#39;</span>
</span></span><span class="line"><span class="cl"><span class="n">inps</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">]</span> <span class="c1"># è¯­æ–™åº“</span>
</span></span><span class="line"><span class="cl"><span class="n">count</span> <span class="o">=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">inp</span> <span class="o">=</span> <span class="n">inps</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="c1"># ç§å­é€‰æ‹©æ¼”ç®—æ³•æ¯”è¾ƒç®€å•ï¼Œä½¿ç”¨æœ€æ–°çš„çš„ç§å­ä½œä¸ºä¸‹ä¸€ä¸ªè¾“å…¥</span>
</span></span><span class="line"><span class="cl">    <span class="n">inp</span> <span class="o">+=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">])</span> <span class="c1"># å˜å¼‚æ¼”ç®—ä¼šæŒ‘é€‰å‡ºæ¥çš„ç§å­åŠ ä¸Šä¸€ä¸ªéšæœºå­—å…ƒä½œä¸ºæœ€ç»ˆçš„è¾“å…¥ã€‚</span>
</span></span><span class="line"><span class="cl">    <span class="k">del</span> <span class="n">inps</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="c1">#åŠ ä¸€ä¸ªåˆ ä¸€ä¸ªï¼Œä¿è¯ä¸‹æ¬¡å–çš„æ˜¯ä¸‹ä¸€ä¸ª</span>
</span></span><span class="line"><span class="cl">    <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span> <span class="c1">#è®°å½•å¤„ç†äº†å¤šå°‘ä¸ªè¾“å…¥</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">comp</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">([</span><span class="n">target</span><span class="p">],</span> <span class="nb">input</span><span class="o">=</span><span class="n">inp</span><span class="o">.</span><span class="n">encode</span><span class="p">(),</span> <span class="n">capture_output</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">check</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="n">comp</span><span class="o">.</span><span class="n">stdout</span> <span class="o">!=</span> <span class="sa">b</span><span class="s1">&#39;&#39;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">inps</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">inp</span><span class="p">)</span> <span class="c1"># å¦‚æœæœ‰è¾“å‡ºçš„è¯åˆ™ä»£è¡¨æ­¤è¾“å…¥ä¸ºæœ‰è¶£</span>
</span></span><span class="line"><span class="cl">    <span class="k">except</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">CalledProcessError</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;bug found with input: &#39;</span><span class="si">{</span><span class="n">inp</span><span class="si">}</span><span class="s2">&#39;&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">break</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="n">count</span> <span class="o">%</span> <span class="mi">100</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">inps</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="c1"># å®šæœŸæ‰“ä¹±è¯­æ–™åº“,é¿å…å˜å¼‚æ•ˆæœä¸å¥½å¯¼è‡´è¾“å…¥æ— æ³•å–å¾—æ–°çš„è¦†ç›–èŒƒå›´</span>
</span></span><span class="line"><span class="cl">        <span class="n">inps</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<p>æ¨¡ç³Šå™¨çš„å¥½åï¼Œé€šå¸¸æ˜¯ï¼š</p>
<ol>
<li><strong>ç§å­é€‰æ‹©</strong>æ˜¯å¦èƒ½æŒ‘å‡ºçœŸæ­£æœ‰æ„ä¹‰çš„ç§å­</li>
<li><strong>å˜å¼‚</strong>çš„éšæœºæ˜¯å¦æœ‰æ•ˆç‡</li>
<li><strong>è¦†ç›–</strong>å®ç°çš„æ–¹å¼æ˜¯å¦ä¼šé€ æˆå¤§é‡çš„å¼€é”€ã€‚</li>
</ol>
<hr>
<h2 id="aflamerican-fuzz-loop">AFL(American Fuzz Loop)
</h2><p>â€“ ç®€ä»‹ &amp; å®‰è£…</p>
<hr>
<p>ä»¥ä¸‹æ˜¯ä¸€äº›æ¯”è¾ƒæœ‰åçš„å¼€æºæ¨¡ç³Šæµ‹è¯•å·¥å…·ï¼š</p>
<ol>
<li><strong>American Fuzzy Lop (AFL)</strong>: AFL æ˜¯ä¸€ä¸ªé«˜æ•ˆçš„æ¨¡ç³Šæµ‹è¯•å·¥å…·</li>
<li><strong>libFuzzer</strong>: libFuzzer æ˜¯ LLVM/Clang æä¾›çš„ä¸€ä¸ªæ¨¡ç³Šæµ‹è¯•å¼•æ“ï¼Œå®ƒå¯ä»¥è½»æ¾åœ°é›†æˆåˆ°ç°æœ‰çš„ä»£ç ä¸­</li>
<li><strong>Syzkaller</strong>: Syzkaller æ˜¯ä¸€ä¸ªä¸“æ³¨äºç³»ç»Ÿè°ƒç”¨æ¥å£çš„æ¨¡ç³Šæµ‹è¯•å·¥å…·ï¼Œå®ƒå¯ä»¥è‡ªåŠ¨ç”Ÿæˆå„ç§ç³»ç»Ÿè°ƒç”¨åºåˆ—ï¼Œå¹¶å¯¹å†…æ ¸è¿›è¡Œæµ‹è¯•ä»¥å‘ç°æ¼æ´å’Œé”™è¯¯ã€‚</li>
<li><strong>OSS-Fuzz</strong>: OSS-Fuzzæ—¨åœ¨é€šè¿‡è‡ªåŠ¨åŒ–æ¨¡ç³Šæµ‹è¯•å‘ç°å¼€æºè½¯ä»¶ä¸­çš„å®‰å…¨æ¼æ´å’Œé”™è¯¯ã€‚</li>
</ol>
<hr>
<h2 id="fuzzæ–¹å¼">Fuzzæ–¹å¼
</h2><p>AFLæœ‰ä¸¤ç§fuzzé€”å¾„ï¼š</p>
<ol>
<li>å¼€æºè½¯ä»¶ï¼šAFLè½¯ä»¶è¿›è¡Œç¼–è¯‘çš„åŒæ—¶è¿›è¡Œæ’æ¡©ï¼Œä»¥æ–¹ä¾¿fuzz</li>
<li>é—­æºè½¯ä»¶ï¼šé…åˆQEMUç›´æ¥å¯¹é—­æºçš„äºŒè¿›åˆ¶ä»£ç è¿›è¡Œfuzz</li>
</ol>
<hr>
<h2 id="ç¯å¢ƒæ­å»º">ç¯å¢ƒæ­å»º
</h2><h3 id="å®‰è£…">å®‰è£…
</h3><p><strong>LinuxåŒ…ç®¡ç†(deb)ï¼š</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell-session" data-lang="shell-session"><span class="line"><span class="cl"><span class="gp">$</span> sudo apt install afl++
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>æºç ç¼–è¯‘å®‰è£… ï¼š</strong></p>
<p>ä¸‹è½½æºç è‡ªè¡Œç¼–è¯‘ï¼š(æ¨èå®‰è£…AFL++ï¼ŒAFlçš„è¯å¦‚æœå¼€ASANå¯èƒ½æœ‰é—®é¢˜)</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell-session" data-lang="shell-session"><span class="line"><span class="cl"><span class="gp">$</span> git clone https://github.com/AFLplusplus/AFLplusplus.git
</span></span><span class="line"><span class="cl"><span class="gp">$</span> <span class="nb">cd</span> AFLplusplus
</span></span><span class="line"><span class="cl"><span class="gp">$</span> make
</span></span><span class="line"><span class="cl"><span class="gp">$</span> sudo make install
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<h2 id="aflamerican-fuzz-loop-1">AFL(American Fuzz Loop)
</h2><h3 id="æ’æ¡©instrumentation">æ’æ¡©ï¼ˆinstrumentationï¼‰
</h3><p>åœ¨ä¿è¯åŸç¨‹åºé€»è¾‘çš„å®Œæ•´æ€§ä¸‹ï¼Œåœ¨ç¨‹åºä¸­æ’å…¥ä¸€äº›ç¨‹åºç æ¥é‡‡é›†è¿è¡ŒæœŸé—´çš„æ‰§è¡ŒçŠ¶æ€ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="kt">int</span> <span class="n">test_var</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// original (1)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">b</span><span class="p">()</span> <span class="p">{</span> <span class="p">...;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">a</span><span class="p">()</span> <span class="p">{</span> <span class="p">...;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// instrumented (2)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">b</span><span class="p">()</span> <span class="p">{</span> <span class="nf">printf</span><span class="p">(</span><span class="s">&#34;test_var: %d</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> <span class="n">test_var</span><span class="p">);</span> <span class="p">...;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">a</span><span class="p">()</span> <span class="p">{</span> <span class="nf">printf</span><span class="p">(</span><span class="s">&#34;test_var: %d</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> <span class="n">test_var</span><span class="p">);</span> <span class="p">...;</span> <span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<h3 id="ç‰¹ç‚¹">ç‰¹ç‚¹ï¼š
</h3><ol>
<li>æ’æ¡©çš„å¯¹è±¡é€šå¸¸éƒ½å…·æœ‰ç›¸åŒçš„å±æ€§æˆ–ç±»åˆ«æ¶‰åŠæ‰€æœ‰çš„åŠŸèƒ½ã€æ‰€æœ‰çš„<strong>åŸºæœ¬å—</strong>ï¼Œæ¯”è¾ƒå°‘é’ˆå¯¹å•ä¸€ç›®æ ‡ã€‚</li>
<li>æ’æ¡©çš„ç¨‹åºä»£ç é€šå¸¸åªæœ‰å‡ è¡Œæ±‡ç¼–ä»£ç ï¼Œå¹¶ä¸”ä¸ä¼šåšå¤ªå¤æ‚çš„æ“ä½œ</li>
<li>åœ¨<strong>æ¨¡ç³Šå™¨</strong>ä¸­ï¼Œæ’æ¡©è¢«ç”¨æ¥è¿›è¡Œ<strong>è¦†ç›–</strong>ï¼Œé‚£ä¹ˆè®°å½•å¤šå°‘ç¨‹åºç è¢«æ‰§è¡Œåˆ°ã€‚</li>
</ol>
<hr>
<p>ä¸¾ä¾‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="kt">int</span> <span class="n">had_exec</span><span class="p">[</span><span class="mi">100</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">a</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">had_exec</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="c1">// (1)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">b</span><span class="p">()</span> <span class="p">{</span> <span class="n">had_exec</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="p">...;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">c</span><span class="p">()</span> <span class="p">{</span> <span class="n">had_exec</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="p">...;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">if</span> <span class="p">(</span><span class="n">had_exec</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="c1">// (2)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nf">puts</span><span class="p">(</span><span class="s">&#34;function a had been called&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<h2 id="demo">Demo
</h2><p>æ¼”ç¤º</p>
<hr>
<p>æµ‹è¯•ç¨‹åºtest.c</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;unistd.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">a</span><span class="p">,</span> <span class="n">idx</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">char</span> <span class="n">buf</span><span class="p">[</span><span class="mi">100</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nf">scanf</span><span class="p">(</span><span class="s">&#34;%d&#34;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">idx</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">buf</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="sc">&#39;\0&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nf">read</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">a</span><span class="p">,</span> <span class="mh">0x2</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">a</span> <span class="o">==</span> <span class="mh">0xdead</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="o">*</span><span class="p">(</span><span class="kt">int</span> <span class="o">*</span><span class="p">)</span><span class="mi">0</span> <span class="o">=</span> <span class="mh">0xdeadbeef</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<h3 id="afl-gcc">afl-gcc
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell-session" data-lang="shell-session"><span class="line"><span class="cl"><span class="gp">$</span> <span class="nb">export</span> <span class="nv">AFL_USE_ASAN</span><span class="o">=</span><span class="m">1</span>
</span></span><span class="line"><span class="cl"><span class="gp">$</span> afl-gcc -fsanitize<span class="o">=</span>address -o <span class="nb">test</span> test.c
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>æœ€åä¼šæˆ‘ä»¬çš„å‘½ä»¤ä¼šå˜æˆè¿™æ ·</li>
</ul>
<blockquote>
<p>gccé€‰ç”¨aflçš„æ±‡ç¼–å™¨æ¥ç¼–è¯‘</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell-session" data-lang="shell-session"><span class="line"><span class="cl"><span class="gp">$</span> gcc -fsanitize<span class="o">=</span>address -o <span class="nb">test</span> test.c -B ~/fuzz/AFLplusplus -g -O3 -funroll-loops -D__AFL_COMPILER<span class="o">=</span><span class="m">1</span> -DFUZZING_BUILD_MODE_UNSAFE_FOR_PRODUCTION<span class="o">=</span><span class="m">1</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>æœ‰è¶£çš„æ˜¯<code>-B ~/fuzz/AFL</code>ï¼Œgcc ä¼šå°è¯•åœ¨è¿™é‡Œå¯»æ‰¾è·¯å¾„å·¥å…·é“¾ä¸­çš„<strong>æ±‡ç¼–å™¨</strong>æ¥æ‰§è¡Œ</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell-session" data-lang="shell-session"><span class="line"><span class="cl"><span class="gp">$</span> ls -al ~/fuzz/AFLplusplus/as
</span></span><span class="line"><span class="cl"><span class="gp">$</span> lrwxrwxrwx <span class="m">1</span> lidaxian lidaxian <span class="m">6</span> Mar <span class="m">29</span> 14:53 as -&gt; afl-as
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<h3 id="afl-as">afl-as
</h3><ul>
<li>afl-asé¦–å…ˆä¼šæ‰§è¡Œå‡½æ•°<code>add_instrumentation()</code>åšæ’æ¡©ï¼ˆå¯¹æ±‡ç¼–ä»£ç ï¼‰ï¼Œæœ€åæ‰§è¡Œasåšæ±‡ç¼–ï¼ˆç¼–è¯‘æˆæœºæ¢°ä»£ç ï¼‰ã€‚æ‰€ä»¥æ’æ¡©æ˜¯åœ¨ç¼–è¯‘ä¹‹åæ±‡ç¼–ä¹‹å‰ã€‚</li>
<li>åšå®Œæ’æ¡©åä¼šæ‰§è¡Œè°ƒæ•´åçš„å‚æ•°æ¥æ±‡ç¼–æ–°çš„asmæ–‡ä»¶ï¼Œæœ€åäº§ç”Ÿçš„æ‰§è¡Œæ–‡ä»¶testå³æ˜¯æœ‰æ’æ¡©çš„ç‰ˆæœ¬ï¼Œç®€å•ç”¨objdumpå°±å¯ä»¥çœ‹åˆ°è®¸å¤šä»¥__aflä¸ºå‰ç¼€çš„å‡½æ•°(è¯´æ˜å·²å®Œæˆæ’æ¡©)ï¼š</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell-session" data-lang="shell-session"><span class="line"><span class="cl"><span class="gp">$</span> objdump -M intel -d <span class="nb">test</span> <span class="p">|</span> grep afl
</span></span><span class="line"><span class="cl"><span class="go">    119d:       e8 1e 02 00 00          call   13c0 &lt;__afl_maybe_log&gt;
</span></span></span><span class="line"><span class="cl"><span class="go">    120d:       e8 ae 01 00 00          call   13c0 &lt;__afl_maybe_log&gt;
</span></span></span><span class="line"><span class="cl"><span class="go">    1255:       e8 66 01 00 00          call   13c0 &lt;__afl_maybe_log&gt;
</span></span></span><span class="line"><span class="cl"><span class="go">    12a1:       e8 1a 01 00 00          call   13c0 &lt;__afl_maybe_log&gt;
</span></span></span></code></pre></td></tr></table>
</div>
</div><hr>
<h3 id="afl-fuzz">afl-fuzz
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell-session" data-lang="shell-session"><span class="line"><span class="cl"><span class="go">afl-fuzz -i seed-dir -o out-dir -m none ./test
</span></span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>-i - å­˜æ”¾æµ‹è¯•ç”¨ä¾‹çš„èµ„æ–™å¤¹</li>
<li>-o - æç½®æ‰§è¡Œç»“æœèµ„æ–™å¤¹</li>
<li>-f - ä»æŒ‡å®šæ–‡ä»¶è¯»å–è¾“å…¥</li>
<li>-t - timeoutï¼Œæ‰§è¡Œæ—¶é—´è¶…è¿‡çš„è¯å°±ä¼šè¢«killæ‰</li>
<li>-m - å†…å­˜é™åˆ¶ï¼Œæ‰§è¡Œæ—¶æ‰€èƒ½ä½¿ç”¨çš„å†…å­˜ä½“ä¸Šé™</li>
<li>-d - è·³è¿‡ç¡®å®šæ€§ï¼Œçªå˜é˜¶æ®µè·³è¿‡æœ€åˆçš„å¤„ç†</li>
<li>-n - å¯¹æ²¡æœ‰æ’æ¡©çš„ç›®æ ‡è¿›è¡Œæ¨¡ç³Šæµ‹è¯•</li>
</ul>
<p>tipsï¼š</p>
<p>è¿è¡Œåé‡åˆ°ä¸€äº›é—®é¢˜ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">demian@Friday:~/C_lab/fuzz$ afl-fuzz -i seed-dir -o out-dir -m none ./test~
</span></span><span class="line"><span class="cl">afl-fuzz++4.09c based on afl by Michal Zalewski and a large online community
</span></span><span class="line"><span class="cl"><span class="o">[</span>+<span class="o">]</span> AFL++ is maintained by Marc <span class="s2">&#34;van Hauser&#34;</span> Heuse, Dominik Maier, Andrea Fioraldi and Heiko <span class="s2">&#34;hexcoder&#34;</span> EiÃŸfeldt
</span></span><span class="line"><span class="cl"><span class="o">[</span>+<span class="o">]</span> AFL++ is open source, get it at https://github.com/AFLplusplus/AFLplusplus
</span></span><span class="line"><span class="cl"><span class="o">[</span>+<span class="o">]</span> NOTE: AFL++ &gt;<span class="o">=</span> v3 has changed defaults and behaviours - see README.md
</span></span><span class="line"><span class="cl"><span class="o">[</span>+<span class="o">]</span> No -M/-S set, autoconfiguring <span class="k">for</span> <span class="s2">&#34;-S default&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>*<span class="o">]</span> Getting to work...
</span></span><span class="line"><span class="cl"><span class="o">[</span>+<span class="o">]</span> Using exponential power schedule <span class="o">(</span>FAST<span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>+<span class="o">]</span> Enabled testcache with <span class="m">50</span> MB
</span></span><span class="line"><span class="cl"><span class="o">[</span>+<span class="o">]</span> Generating fuzz data with a length of <span class="nv">min</span><span class="o">=</span><span class="m">1</span> <span class="nv">max</span><span class="o">=</span><span class="m">1048576</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>*<span class="o">]</span> Checking core_pattern...
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>-<span class="o">]</span> Hmm, your system is configured to send core dump notifications to an
</span></span><span class="line"><span class="cl">    external utility. This will cause issues: there will be an extended delay
</span></span><span class="line"><span class="cl">    between stumbling upon a crash and having this information relayed to the
</span></span><span class="line"><span class="cl">    fuzzer via the standard waitpid<span class="o">()</span> API.
</span></span><span class="line"><span class="cl">    If you<span class="s1">&#39;re just testing, set &#39;</span><span class="nv">AFL_I_DONT_CARE_ABOUT_MISSING_CRASHES</span><span class="o">=</span>1<span class="s1">&#39;.
</span></span></span><span class="line"><span class="cl"><span class="s1">
</span></span></span><span class="line"><span class="cl"><span class="s1">    To avoid having crashes misinterpreted as timeouts, please log in as root
</span></span></span><span class="line"><span class="cl"><span class="s1">    and temporarily modify /proc/sys/kernel/core_pattern, like so:
</span></span></span><span class="line"><span class="cl"><span class="s1">
</span></span></span><span class="line"><span class="cl"><span class="s1">    echo core &gt;/proc/sys/kernel/core_pattern
</span></span></span><span class="line"><span class="cl"><span class="s1">
</span></span></span><span class="line"><span class="cl"><span class="s1">[-] PROGRAM ABORT : Pipe at the beginning of &#39;</span>core_pattern<span class="err">&#39;</span>
</span></span><span class="line"><span class="cl">         Location : check_crash_handling<span class="o">()</span>, src/afl-fuzz-init.c:2361
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä»é”™è¯¯ä¿¡æ¯æ¥çœ‹ï¼Œç³»ç»Ÿé…ç½®äº†å¤–éƒ¨å·¥å…·æ¥å¤„ç†æ ¸å¿ƒè½¬å‚¨ï¼ˆcore dumpï¼‰ï¼Œè¿™ä¼šå¯¼è‡´ AFL++ æ— æ³•æ­£ç¡®å¤„ç†å´©æºƒä¿¡æ¯ã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬è¦ä¿®æ”¹ç³»ç»Ÿçš„ <code>core_pattern</code> é…ç½®ã€‚</p>
<p>é¦–å…ˆï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹å½“å‰çš„ <code>core_pattern</code> é…ç½®ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">cat /proc/sys/kernel/core_pattern
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¾“å‡ºç±»ä¼¼äº <code>|/usr/lib/systemd/systemd-coredump %p %u %g %s %t %c %h</code>ï¼Œè¯´æ˜ç³»ç»Ÿé…ç½®äº†å¤–éƒ¨å·¥å…·æ¥å¤„ç†æ ¸å¿ƒè½¬å‚¨ã€‚</p>
<p>ç„¶åä»¥ root ç”¨æˆ·èº«ä»½è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå°† <code>core_pattern</code> ä¿®æ”¹ä¸º <code>core</code>ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">echo</span> core <span class="p">|</span> sudo tee /proc/sys/kernel/core_pattern
</span></span></code></pre></td></tr></table>
</div>
</div><p>å†æ¬¡æŸ¥çœ‹ <code>core_pattern</code> é…ç½®ï¼Œç¡®è®¤ä¿®æ”¹æˆåŠŸï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">cat /proc/sys/kernel/core_pattern
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¦‚æœè¾“å‡ºä¸º <code>core</code>ï¼Œè¯´æ˜ä¿®æ”¹æˆåŠŸã€‚</p>
<p>æ¥ä¸‹æ¥å°±å¯ä»¥é‡æ–°è¿è¡Œ AFL-fuzzã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell-session" data-lang="shell-session"><span class="line"><span class="cl"><span class="go">afl-fuzz -i seed-dir -o out-dir -m none ./test
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>åœ¨åˆ›å»ºäº†ç›¸å…³ç›®å½•å’Œç§å­æ–‡ä»¶åï¼Œå‘½ä»¤è¿è¡ŒæˆåŠŸå°±èƒ½åœ¨ç»ˆç«¯çœ‹è§å¦‚ä¸‹ç»“æœäº†ï¼š</p>
<p><img src="/pics/fuzzing.png"
	
	
	
	loading="lazy"
	
		alt="fuzzing"
	
	
></p>
<h2 id="crashåˆ†æ">Crashåˆ†æ
</h2><p>out-dir/crashesç›®å½•ä¸‹çš„å†…å®¹æ˜¯å¼•å‘å´©æºƒçš„è¾“å…¥ã€‚</p>
<hr>
<h2 id="sanitizer">Sanitizer
</h2><hr>
<p>å³ä½¿ç¨‹åºå­˜åœ¨æ¼æ´ï¼Œä¹Ÿä¸ä¸€å®šä¼šåœ¨æ‰§è¡Œåˆ°æœ‰æ¼æ´çš„ç¨‹å¼ç æ—¶è§¦å‘å¼‚å¸¸</p>
<p>ä¸¾ä¾‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="kt">char</span> <span class="n">buf</span><span class="p">[</span><span class="mi">100</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="nf">scanf</span><span class="p">(</span><span class="s">&#34;%d&#34;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">idx</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">buf</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="sc">&#39;\0&#39;</span><span class="p">;</span> <span class="c1">// (1)
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ç„¶è€Œå³ä¾¿ä¼šæœ‰out-of-bound write çš„æ¼æ´å‘ç”Ÿï¼Œä½†å¦‚æœ<code>buf[101]</code>å¯¹åº”åˆ°çš„åœ°å€æ­£å¥½æ²¡è¢«ä½¿ç”¨åˆ°ï¼Œé‚£ä¹ˆfuzzerä¹Ÿä¸ä¼šæ„Ÿå…´è¶£ã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬éœ€è¦â€œSanitizerâ€æ¥è¾…åŠ©æ£€æµ‹ç¨‹åºé—®é¢˜ï¼Œå®ƒæ˜¯ä¸€ç§ç”¨äºæ£€æµ‹ç¨‹åºä¸­å„ç§é”™è¯¯ï¼ˆå¦‚å†…å­˜é”™è¯¯ã€æ•°æ®ç«äº‰ç­‰ï¼‰çš„å·¥å…·ã€‚å®ƒé€šå¸¸é›†æˆåœ¨ç¼–è¯‘å™¨ä¸­ï¼Œå¯ä»¥åœ¨ç¨‹åºè¿è¡Œæ—¶æ£€æµ‹é—®é¢˜ã€‚</p>
<p>èƒ½è¾…åŠ©æ£€æµ‹ï¼Œä½†æ˜¯æœ‰é¢å¤–æ€§èƒ½å’Œæ—¶é—´éœ€æ±‚ã€‚</p>
<hr>
<p>å¸¸è§çš„Sanitizeræœ‰ï¼š</p>
<ol>
<li><strong>AddressSanitizer</strong> (+LeakSanitizer)</li>
<li>ThreadSanitizer</li>
<li>UndefinedBehaviorSanitizer</li>
<li>MemorySanitizer</li>
</ol>
<hr>
<h2 id="addresssanitizeråŸç†ç®€ä»‹">AddressSanitizeråŸç†ç®€ä»‹
</h2><p>è¿™ä¸ªå†…å­˜æ£€æŸ¥æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ</p>
<hr>
<p>å·¦ä¾§ï¼Œè“è‰²åŒºåŸŸæ˜¯æˆ‘ä»¬åˆ†é…çš„å†…å­˜åœ¨å³ä¾§</p>
<p>å³ä¾§ï¼Œ<code>Redzones</code>æ˜¯ä¸­æ¯’çš„å†…å­˜ï¼Œè®¿é—®å³æŠ¥é”™ã€‚</p>
<p><img src="https://suelan.github.io/2020/08/18/20200817-address-sanitizer/image-20200816120042864.png"
	
	
	
	loading="lazy"
	
		alt="å›¾ç‰‡20200816120042864"
	
	
></p>
<hr>
<p>å¦‚æœé€šè¿‡å¯ç”¨Address Sanitizeræ¥ç¼–è¯‘å¯æ‰§è¡Œæ–‡ä»¶ï¼Œåˆ™æ¯æ¬¡è®¿é—®å†…å­˜ä¹‹å‰ï¼Œéƒ½ä¼šæœ‰å‰ç¼€æŒ‡ä»¤æ¥æ£€æŸ¥è¯¥å†…å­˜æ˜¯å¦ä¸º<code>poisoned</code>.å¦‚æœæ˜¯ï¼ŒAddress Sanitizer å°†ç”Ÿæˆå¦‚ä¸Šæ‰€ç¤ºçš„è¯Šæ–­æŠ¥å‘Šã€‚</p>
<p><img src="https://suelan.github.io/2020/08/18/20200817-address-sanitizer/image-20200816120700174.png"
	
	
	
	loading="lazy"
	
		alt="å›¾ç‰‡20200816120700174"
	
	
></p>
<hr>
<p>ä¸‹å›¾æ˜¾ç¤ºè¯¥è¿›ç¨‹æ­£åœ¨å°è¯•è®¿é—®ä¸­æ¯’å†…å­˜ï¼Œå¹¶è§¦å‘<code>Crash</code>å¹¶ç”Ÿæˆè¯Šæ–­æŠ¥å‘Šã€‚</p>
<p><img src="https://suelan.github.io/2020/08/18/20200817-address-sanitizer/image-20200816120921377.png"
	
	
	
	loading="lazy"
	
		alt="å›¾ç‰‡20200816120921377"
	
	
></p>
<hr>
<h3 id="å †å¯¹è±¡åˆ†é…">å †å¯¹è±¡åˆ†é…
</h3><p>Address Sanitizeré€šè¿‡ä½¿ç”¨å®ƒè‡ªå·±çš„åˆ†é…å®ç°æ¥æ›¿æ¢é»˜è®¤çš„ Malloc å®ç°ï¼Œè¯¥å®ç°å°†å¯¹è±¡å½¼æ­¤åˆ†å¼€ï¼Œä¸­é—´æ’å…¥æœ‰æ¯’å†…å­˜ã€‚</p>
<p><img src="https://suelan.github.io/2020/08/18/20200817-address-sanitizer/image-20200816123141896.png"
	
	
	
	loading="lazy"
	
		alt="å›¾ç‰‡20200816123141896"
	
	
></p>
<hr>
<h3 id="å †æ ˆå˜é‡">å †æ ˆå˜é‡
</h3><p>åœ¨ä¸¤ä¸ªå †æ ˆå˜é‡ä¹‹é—´æ’å…¥ä¸€äº›çº¢è‰²åŒºåŸŸï¼Œå› æ­¤å †æ ˆçº¢è‰²åŒºåŸŸåœ¨è¿è¡Œæ—¶ä¸­æ¯’ã€‚</p>
<p><img src="https://suelan.github.io/2020/08/18/20200817-address-sanitizer/image-20200816150456865.png"
	
	
	
	loading="lazy"
	
		alt="å›¾ç‰‡20200816150456865"
	
	
></p>
<hr>
<h3 id="é¢å¤–çš„å¼€é”€">é¢å¤–çš„å¼€é”€
</h3><ul>
<li>CPU å‡é€Ÿé€šå¸¸åœ¨ 2 å€åˆ° 5 å€ä¹‹é—´ æ­£å¸¸æƒ…å†µä¸‹ï¼ŒCPU é€Ÿåº¦å‡æ…¢ 2 å€è‡³ 3 å€ã€‚åœ¨æŸäº›æç«¯æƒ…å†µä¸‹ï¼Œä»–ä»¬çš„é€Ÿåº¦ä¸‹é™äº† 5 å€ã€‚</li>
<li>å†…å­˜å¼€é”€ 2xâ€“3x</li>
<li>AddressSanitizer ä½¿ç”¨æ¯”æœ¬æœºè¿è¡Œæ›´å¤šçš„å®é™…å†…å­˜ã€‚ç¡®åˆ‡çš„å¼€é”€å–å†³äºåˆ†é…å¤§å°ã€‚åˆ†é…è¶Šå°ï¼Œå¼€é”€å°±è¶Šå¤§ã€‚</li>
<li>AddressSanitizer ä½¿ç”¨æ›´å¤šçš„å †æ ˆå†…å­˜ã€‚æˆ‘ä»¬çœ‹åˆ°å¢é•¿é«˜è¾¾ 3 å€ã€‚</li>
</ul>
<hr>
<h2 id="å®æˆ˜æ¼”ç¤º-libpng">å®æˆ˜æ¼”ç¤º-libpng
</h2><hr>
<h3 id="0x0ç¼–è¯‘fuzzç›®æ ‡">0x0.ç¼–è¯‘fuzzç›®æ ‡
</h3><p><a class="link" href="https://libpng.sourceforge.io/"  target="_blank" rel="noopener"
    >libpng</a>æ˜¯å¼€æºçš„pngè§£æåº“</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell-session" data-lang="shell-session"><span class="line"><span class="cl"><span class="gp">$</span> wget https://nchc.dl.sourceforge.net/project/libpng/libpng16/1.6.36/libpng-1.6.36.tar.xz
</span></span><span class="line"><span class="cl"><span class="gp">$</span> tar xvf libpng-1.6.36.tar.xz
</span></span><span class="line"><span class="cl"><span class="gp">$</span> <span class="nb">cd</span> libpng-1.6.36
</span></span><span class="line"><span class="cl"><span class="gp">$</span> ./autogen.sh 
</span></span><span class="line"><span class="cl"><span class="gp">$</span> <span class="nv">CC</span><span class="o">=</span>afl-clang <span class="nv">CXX</span><span class="o">=</span>afl-g++ ./configure --enable-static
</span></span><span class="line"><span class="cl"><span class="gp">$</span> make -j4
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p><code>--enable-static</code> ï¼š ç”¨äºç”Ÿæˆé™æ€åº“ï¼Œfuzzå¼€æºåº“æ—¶ä¼šéœ€è¦</p>
</blockquote>
<hr>
<h3 id="0x1å‡†å¤‡ç¯å¢ƒå‡†å¤‡ç§å­">0x1.å‡†å¤‡ç¯å¢ƒ(å‡†å¤‡ç§å­)
</h3><p>è·å–å®˜ç½‘æä¾›çš„æµ‹è¯•é›†ä½œä¸ºè¾“å…¥</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell-session" data-lang="shell-session"><span class="line"><span class="cl"><span class="gp">$</span> mkdir fuzz_in fuzz_out
</span></span><span class="line"><span class="cl"><span class="gp">$</span> <span class="nb">cd</span> fuzz_in
</span></span><span class="line"><span class="cl"><span class="gp">$</span> wget http://lcamtuf.coredump.cx/afl/demo/afl_testcases.tgz
</span></span><span class="line"><span class="cl"><span class="gp">$</span> tar xvf afl_testcases.tgz
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<h3 id="0x2å¼€å§‹fuzzhttpslidaxian121githubiopostsfuzz0x2å¼€å§‹fuzz">0x2.å¼€å§‹fuzz<a class="link" href="https://lidaxian121.github.io/posts/fuzz/#0x2%e5%bc%80%e5%a7%8bfuzz"  target="_blank" rel="noopener"
    >#</a>
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell-session" data-lang="shell-session"><span class="line"><span class="cl"><span class="gp">$</span> afl-fuzz -i ../fuzz_in/png/full/images -o ../fuzz_out ../.libs/pngimage @@
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>../fuzz_in/png/full/images</code>ä¸ºaflæµ‹è¯•é›†</p>
<p><code>../.libs/pngimage</code>æ˜¯ç¼–è¯‘å‡ºæ¥çš„è¢«æµ‹è¯•ç¨‹åº</p>
<p>@@ä»£è¡¨æµ‹è¯•è¾“å…¥æ ·æœ¬</p>
<hr>
<h3 id="0x3æŠ¥é”™å¤„ç†å¦‚æœå®‰è£…åœ¨ç³»ç»Ÿä¸Šæ—¶">0x3.æŠ¥é”™å¤„ç†(å¦‚æœå®‰è£…åœ¨ç³»ç»Ÿä¸Šæ—¶)
</h3><p>AFLæµ‹è¯•æ—¶ç”¨åˆ°åŠŸèƒ½éœ€è¦è¿˜æ²¡æœ‰å¼€å¯</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo su
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> core &gt;/proc/sys/kernel/core_pattern
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> /sys/devices/system/cpu
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> performance <span class="p">|</span> tee cpu*/cpufreq/scaling_governor
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<h2 id="æ€»ç»“">æ€»ç»“
</h2><hr>
<ul>
<li>ä½¿ç”¨AFLåœ¨linuxä¸Šfuzzå¼€æºè½¯ä»¶ååˆ†ç®€å•</li>
<li>å¤§å¤šæ•°çš„lib/å¼€æºè½¯ä»¶çš„æºä»£ç éƒ½æ˜¯å¯ä»¥è·å–çš„</li>
<li>åœ¨ç¼–è¯‘æ—¶æ’æ¡©æ˜¯å¯è¡Œçš„</li>
<li>åœ¨Fuzzæ—¶è¦ç”¨ASAN,MSAN,UBSAN</li>
<li>æœ‰æ—¶æœ€éœ€è¦èŠ±è´¹æ—¶é—´çš„è¿‡ç¨‹æ˜¯é¡¹ç›®ç¼–è¯‘
<ul>
<li>ç¼ºå¤±å¼•ç”¨çš„ç¬¬ä¸‰æ–¹åº“ï¼ˆlibï¼‰</li>
<li>ç¼–è¯‘è¿‡ç¨‹ä¸­çš„å„ç§é”™è¯¯</li>
<li>ä¸åŒé¡¹ç›®ä¸åŒçš„ç¼–è¯‘æ–¹æ³•ä¸å„ç§é€‰é¡¹</li>
</ul>
</li>
</ul>

</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/fuzz/">Fuzz</a>
        
    </section>


    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
        <link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css"integrity="sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI&#43;WdtXRGWt2kTvGFasHpSy3SV"crossorigin="anonymous"
            ><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"integrity="sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG&#43;vnGctmUb0ZY0l8"crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"integrity="sha384-&#43;VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4&#43;/RRE05"crossorigin="anonymous"
                defer
                >
            </script><script>
    window.addEventListener("DOMContentLoaded", () => {
        renderMathInElement(document.body, {
            delimiters: [
                { left: "$$", right: "$$", display: true },
                { left: "$", right: "$", display: false },
                { left: "\\(", right: "\\)", display: false },
                { left: "\\[", right: "\\]", display: true }
            ],
            ignoredClasses: ["gist"]
        });})
</script>
    
</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">ç›¸å…³æ–‡ç« </h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="has-image">
    <a href="/p/dafl-reproduce/">
        
        
            <div class="article-image">
                
                    <img src="/images/FullMoon.png" loading="lazy" data-key="" data-hash="/images/FullMoon.png"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">DAFL Reproduce</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/p/beaconwindranger/">
        
        
            <div class="article-image">
                
                    <img src="/images/ChillOcean.png" loading="lazy" data-key="" data-hash="/images/ChillOcean.png"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Beacon&amp;WindRanger</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/p/dgf-tool-energy-allocation-strategies/">
        
        
            <div class="article-image">
                
                    <img src="/images/RiverInTrees.png" loading="lazy" data-key="" data-hash="/images/RiverInTrees.png"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">DGF Tool Energy Allocation Strategies</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/p/dgf-overview/">
        
        
            <div class="article-image">
                
                    <img src="/images/EarlyMorningForest.png" loading="lazy" data-key="" data-hash="/images/EarlyMorningForest.png"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">DGF Overview</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/p/gpac_01cve-2024-0321/">
        
        
            <div class="article-image">
                
                    <img src="/images/MountainWhispers.png" loading="lazy" data-key="" data-hash="/images/MountainWhispers.png"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">gpac_01:CVE-2024-0321</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    <script
    src="https://giscus.app/client.js"
    data-repo="Ch0ser/Ch0ser.github.io"
    data-repo-id="R_kgDONQti8w"
    data-category="Announcements"
    data-category-id="DIC_kwDONQti884Cwi5K"
    data-mapping="pathname"
    data-strict="1"
    data-reactions-enabled="1"
    data-emit-metadata="0"
    data-input-position="top"
    data-theme="light"
    data-lang="zh-CN"
    data-loading="lazy"
    crossorigin="anonymous"
    async
></script>
<script>
    function setGiscusTheme(theme) {
        let giscus = document.querySelector("iframe.giscus-frame");
        if (giscus) {
            giscus.contentWindow.postMessage(
                {
                    giscus: {
                        setConfig: {
                            theme: theme,
                        },
                    },
                },
                "https://giscus.app"
            );
        }
    }

    (function () {
        addEventListener("message", (e) => {
            if (event.origin !== "https://giscus.app") return;
            handler();
        });
        window.addEventListener("onColorSchemeChange", handler);

        function handler() {
            if (document.documentElement.dataset.scheme === "light") {
                setGiscusTheme('light');
            } else {
                setGiscusTheme('dark_dimmed');
            }
        }
    })();
</script>

    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2023 - 
        
        2025 Ch0ser
    </section>
    
    <section class="powerby">
        
            Â© 2023-2025 Ch0ser. All Rights Reserved. <br/>
        ä½¿ç”¨ <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> æ„å»º <br />
        ä¸»é¢˜ <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.29.0">Stack</a></b> ç”± <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> è®¾è®¡
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
